!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function loadRootBlock(code,settings){rootBlockInst&&(rootBlockInst.outputs.audio.node.disconnect(audioContext.destination),rootBlockInst.deactivate&&rootBlockInst.deactivate(),document.querySelector("#root-container").innerHTML=""),rootBlockCode=code,rootBlockClass=eval(code),rootBlockInst=new rootBlockClass(document,audioContext,settings),document.querySelector("#root-container").appendChild(rootBlockInst.windowView),rootBlockInst.outputs.audio.node.connect(audioContext.destination)}function loadEmptyRacket(){loadRootBlock(availableBlockCodes.Racket,void 0)}var _fileSaver=__webpack_require__(10),_fileSaver2=_interopRequireDefault(_fileSaver),_polyfills=__webpack_require__(8),_polyfills2=_interopRequireDefault(_polyfills),_initWebAudio=__webpack_require__(9),_initWebAudio2=_interopRequireDefault(_initWebAudio),iosDragDropShim={enableEnterLeave:!0};__webpack_require__(13),(0,_polyfills2.default)();var availableBlockCodes={"Big Ben":__webpack_require__(14),Convolux:__webpack_require__(15),Egen:__webpack_require__(16),Gainer:__webpack_require__(17),Orinami:__webpack_require__(18),Racket:__webpack_require__(19),Scope:__webpack_require__(20),Thumper:__webpack_require__(21),Waverly:__webpack_require__(22)},blockPaletteElem=document.querySelector("#block-palette"),_loop=function(e){var t=document.createElement("div");t.textContent=e,t.setAttribute("draggable",!0),t.className="block-palette-item",blockPaletteElem.appendChild(t),t.addEventListener("dragstart",function(t){t.dataTransfer.setData("text/javascript",availableBlockCodes[e])},!1)};for(var blockName in availableBlockCodes)_loop(blockName);var audioContext=(0,_initWebAudio2.default)(window),rootBlockCode=void 0,rootBlockClass=void 0,rootBlockInst=void 0;document.querySelector("#load-racket-button").addEventListener("click",function(e){e.preventDefault(),loadEmptyRacket()}),document.querySelector("#load-preset-button").addEventListener("click",function(e){e.preventDefault();var t=document.querySelector("#load-preset-file-chooser").files;if(t.length<1)return void console.log("no file chosen");var n=t[0],r=new FileReader;r.onload=function(e){var t=e.target.result,n=JSON.parse(t);n.plinthPreset||console.log("not a preset"),loadRootBlock(n.code,n.settings)},r.readAsText(n,"utf-8")}),document.querySelector("#save-preset-button").addEventListener("click",function(e){e.preventDefault();var t=null;rootBlockInst.save?t=rootBlockInst.save():console.log("Loaded block doesn't support saving settings");var n={plinthPreset:"0.1.0",code:rootBlockCode,settings:t},r=JSON.stringify(n);_fileSaver2.default.saveAs(new Blob([r],{type:"application/json;charset=utf-8"}),"preset.json")}),loadEmptyRacket()},,,,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){!function(e){e.AnalyserNode&&(e.AnalyserNode.prototype.getFloatTimeDomainData||!function(){var t=new Uint8Array(32768);e.AnalyserNode.prototype.getFloatTimeDomainData=function(e){var n=Math.min(this.fftSize,e.length);this.getByteTimeDomainData(t);for(var r=0;r<n;r++)e[r]=.0078125*t[r]-1}}())}(window)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new(e.AudioContext||e.webkitAudioContext),n=e.navigator.userAgent,r=!!n.match(/i(Pad|Phone)/i),a=!!n.match(/WebKit/i),i=r&&a&&!n.match(/CriOS/i)&&!n.match(/OPiOS/i);return i&&!function(){var n=e.document,r=function(){var e=t.createOscillator();e.frequency.value=1,e.start?e.start():e.noteOn(),e.stop?e.stop():e.noteOff(),n.body.removeChild(i)},a=n.createElement("div");a.style.cssText="position:absolute;bottom:0;left:0;top:0;right:0;width:5em;height:1.2em;margin:auto;padding:0.5em;background:#91d780;font-size:48px;text-align:center;border-radius:0.5em;border:4px solid white;font-weight:bold",a.textContent="Launch";var i=n.createElement("div");i.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;background:rgba(0,0,0,0.9)",i.appendChild(a),i.addEventListener("mousedown",r),n.body.appendChild(i)}(),t}},function(e,t,n){var r,a=a||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in r,i=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",u=4e4,d=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,u)},p=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var a=e["on"+t[r]];if("function"==typeof a)try{a.call(e,n||e)}catch(e){l(e)}}},f=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},h=function(t,l,u){u||(t=f(t));var h,v=this,m=t.type,g=m===c,y=function(){p(v,"writestart progress write writeend".split(" "))},b=function(){if((s||g&&o)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=s?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank");n||(e.location.href=t),t=void 0,v.readyState=v.DONE,y()},r.readAsDataURL(t),void(v.readyState=v.INIT)}if(h||(h=n().createObjectURL(t)),g)e.location.href=h;else{var a=e.open(h,"_blank");a||(e.location.href=h)}v.readyState=v.DONE,y(),d(h)};return v.readyState=v.INIT,a?(h=n().createObjectURL(t),void setTimeout(function(){r.href=h,r.download=l,i(r),y(),d(h),v.readyState=v.DONE})):void b()},v=h.prototype,m=function(e,t,n){return new h(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=f(e)),navigator.msSaveOrOpenBlob(e,t)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof e&&e.exports?e.exports.saveAs=a:null!==n(11)&&null!==n(12)&&(r=function(){return a}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){!function(e){function t(t){t=t||{},f=navigator.userAgent.match(/OS [1-4](?:_\d+)+ like Mac/)?"page":"client";var i=e.createElement("div"),o="draggable"in i,s="ondragstart"in i&&"ondrop"in i,l=!(o||s)||/iPad|iPhone|iPod|Android/.test(navigator.userAgent);u((l?"":"not ")+"patching html5 drag drop"),l&&(t.enableEnterLeave||(n.prototype.synthesizeEnterLeave=p),t.holdToDrag?e.addEventListener("touchstart",r(t.holdToDrag)):e.addEventListener("touchstart",a))}function n(e,t){this.dragData={},this.dragDataTypes=[],this.dragImage=null,this.dragImageTransform=null,this.dragImageWebKitTransform=null,this.customDragImage=null,this.customDragImageX=null,this.customDragImageY=null,this.el=t||e.target,u("dragstart"),this.dispatchDragStart()&&(this.createDragImage(),this.listen())}function r(e){return function(t){var n=t.target;if(n.draggable===!0)var r=function(){l.off(),c.off(),u.off(),a(t)},i=function(){l.off(),c.off(),u.off(),clearTimeout(o)},o=setTimeout(r,e),l=s(n,"touchend",i,this),c=s(n,"touchcancel",i,this),u=s(window,"scroll",i,this)}}function a(t){var r=t.target;do if(r.draggable===!0){if(!r.hasAttribute("draggable")&&"a"==r.tagName.toLowerCase()){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,r.ownerDocument.defaultView,1,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),r.dispatchEvent(a),u("Simulating click to anchor")}t.preventDefault(),new n(t,r);break}while((r=r.parentNode)&&r!==e.body)}function i(t,n){var r=n.changedTouches[0],a=e.elementFromPoint(r[f+"X"],r[f+"Y"]);return a}function o(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}}function s(e,t,n,r){return r&&(n=n.bind(r)),e.addEventListener(t,n),{off:function(){return e.removeEventListener(t,n)}}}function l(e,t,n,r){function a(r){return n(r),e.removeEventListener(t,a)}return r&&(n=n.bind(r)),e.addEventListener(t,a)}function c(e,t){if(1==e.nodeType){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),t.removeAttribute("draggable");for(var n=window.getComputedStyle(e),r=0;r<n.length;r++){var a=n[r];t.style.setProperty(a,n.getPropertyValue(a),n.getPropertyPriority(a))}t.style.pointerEvents="none"}if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++)c(e.childNodes[i],t.childNodes[i])}function u(e){console.log(e)}function d(e){return 0===e.length?0:e.reduce(function(e,t){return t+e},0)/e.length}function p(){}u=p;var f;n.prototype={listen:function(){function t(e){this.dragend(e,e.target),n.call(this)}function n(){return u("cleanup"),this.dragDataTypes=[],null!==this.dragImage&&(this.dragImage.parentNode.removeChild(this.dragImage),this.dragImage=null,this.dragImageTransform=null,this.dragImageWebKitTransform=null),this.customDragImage=null,this.customDragImageX=null,this.customDragImageY=null,this.el=this.dragData=null,[r,a,i].forEach(function(e){return e.off()})}var r=s(e,"touchmove",this.move,this),a=s(e,"touchend",t,this),i=s(e,"touchcancel",n,this)},move:function(e){e.preventDefault();var t=[],n=[];[].forEach.call(e.changedTouches,function(e){t.push(e.pageX),n.push(e.pageY)});var r=d(t)-(this.customDragImageX||parseInt(this.dragImage.offsetWidth,10)/2),a=d(n)-(this.customDragImageY||parseInt(this.dragImage.offsetHeight,10)/2);this.translateDragImage(r,a),this.synthesizeEnterLeave(e)},translateDragImage:function(e,t){var n="translate("+e+"px,"+t+"px) ";null!==this.dragImageWebKitTransform&&(this.dragImage.style["-webkit-transform"]=n+this.dragImageWebKitTransform),null!==this.dragImageTransform&&(this.dragImage.style.transform=n+this.dragImageTransform)},synthesizeEnterLeave:function(e){var t=i(this.el,e);t!=this.lastEnter&&(this.lastEnter&&this.dispatchLeave(e),this.lastEnter=t,this.lastEnter&&this.dispatchEnter(e)),this.lastEnter&&this.dispatchOver(e)},dragend:function(t){u("dragend"),this.lastEnter&&this.dispatchLeave(t);var n=i(this.el,t);n?(u("found drop target "+n.tagName),this.dispatchDrop(n,t)):u("no drop target");var r=e.createEvent("Event");r.initEvent("dragend",!0,!0),this.el.dispatchEvent(r)},dispatchDrop:function(t,n){var r=e.createEvent("Event");r.initEvent("drop",!0,!0);var a=n.changedTouches[0],i=a[f+"X"],s=a[f+"Y"],c=o(t);r.offsetX=i-c.x,r.offsetY=s-c.y,r.dataTransfer={types:this.dragDataTypes,getData:function(e){return this.dragData[e]}.bind(this),dropEffect:"move"},r.preventDefault=function(){}.bind(this),l(e,"drop",function(){u("drop event not canceled")},this),t.dispatchEvent(r)},dispatchEnter:function(t){var n=e.createEvent("Event");n.initEvent("dragenter",!0,!0),n.dataTransfer={types:this.dragDataTypes,getData:function(e){return this.dragData[e]}.bind(this)};var r=t.changedTouches[0];n.pageX=r.pageX,n.pageY=r.pageY,n.clientX=r.clientX,n.clientY=r.clientY,this.lastEnter.dispatchEvent(n)},dispatchOver:function(t){var n=e.createEvent("Event");n.initEvent("dragover",!0,!0),n.dataTransfer={types:this.dragDataTypes,getData:function(e){return this.dragData[e]}.bind(this)};var r=t.changedTouches[0];n.pageX=r.pageX,n.pageY=r.pageY,n.clientX=r.clientX,n.clientY=r.clientY,this.lastEnter.dispatchEvent(n)},dispatchLeave:function(t){var n=e.createEvent("Event");n.initEvent("dragleave",!0,!0),n.dataTransfer={types:this.dragDataTypes,getData:function(e){return this.dragData[e]}.bind(this)};var r=t.changedTouches[0];n.pageX=r.pageX,n.pageY=r.pageY,n.clientX=r.clientX,n.clientY=r.clientY,this.lastEnter.dispatchEvent(n),this.lastEnter=null},dispatchDragStart:function(){var t=e.createEvent("Event");return t.initEvent("dragstart",!0,!0),t.dataTransfer={setData:function(e,t){return this.dragData[e]=t,this.dragDataTypes.indexOf(e)==-1&&(this.dragDataTypes[this.dragDataTypes.length]=e),t}.bind(this),setDragImage:function(e,t,n){this.customDragImage=e,this.customDragImageX=t,this.customDragImageY=n}.bind(this),dropEffect:"move"},this.el.dispatchEvent(t)},createDragImage:function(){this.customDragImage?(this.dragImage=this.customDragImage.cloneNode(!0),c(this.customDragImage,this.dragImage)):(this.dragImage=this.el.cloneNode(!0),c(this.el,this.dragImage)),this.dragImage.style.opacity="0.5",this.dragImage.style.position="absolute",this.dragImage.style.left="0px",this.dragImage.style.top="0px",this.dragImage.style.zIndex="999999";var t=this.dragImage.style.transform;"undefined"!=typeof t&&(this.dragImageTransform="","none"!=t&&(this.dragImageTransform=t.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,"")));var n=this.dragImage.style["-webkit-transform"];"undefined"!=typeof n&&(this.dragImageWebKitTransform="","none"!=n&&(this.dragImageWebKitTransform=n.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""))),this.translateDragImage(-9999,-9999),e.body.appendChild(this.dragImage)}},t(window.iosDragDropShim)}(document)},function(e,t){e.exports='(function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)})([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),s=r(i);e.exports=s.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){var e=[],t=function(t){return e.push(t),function(){e.splice(e.indexOf(t),1)}},n=function(t,n){var r=!0,i=!1,s=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var a=o.value;a(t,n)}}catch(e){i=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw s}}};return[t,n]}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),l=(r(a),n(3)),c=r(l),v="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxnPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLDBDNS4zNzUsMCwwLjAwMyw1LjM3MywwLjAwMywxMmMwLDYuNjI3LDUuMzcyLDEyLDExLjk5NywxMiAgICBjNi42MjYsMCwxMS45OTctNS4zNzMsMTEuOTk3LTEyQzIzLjk5Nyw1LjM3MywxOC42MjYsMCwxMiwweiBNMTYuNDEyLDE2LjcwOWwtMC4zNSwwLjM1Yy0wLjI5MSwwLjI5MS0wLjc4MiwwLjMwNS0xLjA4OCwwLjAyOSAgICBsLTQuNTItMy45NTVjLTAuMzA4LTAuMjc1LTAuNTQxLTAuODM4LTAuNTIxLTEuMjVsMC40MTktNy4xMzRDMTAuMzc0LDQuMzM2LDEwLjcyOSw0LDExLjE0Miw0aDAuNDkzICAgIGMwLjQxMywwLDAuNzY3LDAuMzM2LDAuNzg3LDAuNzQ4bDAuMzQzLDUuOTM0YzAuMDIxLDAuNDEzLDAuMjYyLDEsMC41MzUsMS4zMDlsMy4xNDQsMy42MjggICAgQzE2LjcxNywxNS45MjgsMTYuNzA0LDE2LjQxOCwxNi40MTIsMTYuNzA5eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9nPjwvZz48L3N2Zz4=",h=function(){function e(t,n,r){var u=this;i(this,e);var a=4,l=[{outName:"gate16",divisor:1},{outName:"gate8",divisor:2},{outName:"gate4",divisor:4}];this.inputs={},this.outputs={};var h=!0,f=!1,y=void 0;try{for(var p,d=l[Symbol.iterator]();!(h=(p=d.next()).done);h=!0){var m=p.value,L=s(),M=o(L,2),w=M[0],g=M[1];this.outputs[m.outName]={type:"gateEvent",subscribe:w},m.emitter=g}}catch(e){f=!0,y=e}finally{try{!h&&d.return&&d.return()}finally{if(f)throw y}}this.tempo=120;var x=10;if(r){var _=JSON.parse(r);this.tempo=_.tempo}var b=t.createElement("div");b.innerHTML=\'<div style="box-sizing: border-box; width: 62px; height: 256px; padding: 5px; background-color: #a72a2a;font-size:14px"><div style="text-align:center;margin:40px 0 20px"><img width="48" height="48" src="\'+v+\'"></div><div><label>Tempo<br><input type="number" value="\'+this.tempo+\'" min="\'+x+\'" style="width: 50px" />bpm</label></div></div>\',this.panelView=b.childNodes[0],this.panelView.querySelector("input").addEventListener("input",function(e){var t=parseInt(e.target.value,10);!isNaN(t)&&t>=x&&(u.tempo=t)},!1),this._scheduler=new c.default(n);var I=n.currentTime+.1,N=0;this._scheduler.start(function(e){for(var t=60/(u.tempo*a);I<e.end;){var n=!0,r=!1,i=void 0;try{for(var s,o=l[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value,v=c.divisor,h=v*t;N%v===0&&(c.emitter(I,!0),c.emitter(I+.5*h,!1))}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}I+=t,N++}})}return u(e,[{key:"deactivate",value:function(){this._scheduler.stop()}},{key:"save",value:function(){return JSON.stringify({tempo:this.tempo})}}]),e}();t.default=h,h.blockName="Big Ben"},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,a,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error(\'Uncaught, unspecified "error" event. (\'+t+")");throw c.context=t,c}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(s(n))for(u=Array.prototype.slice.call(arguments,1),l=n.slice(),i=l.length,a=0;a<i;a++)l[a].apply(this,u);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(u=o;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.audioContext=t,this.running=!1,this.timeoutID=null}return r(e,[{key:"start",value:function(e){var t=.05,n=.1,r=this,i=null,s=null,o=function o(){if(!r.running)throw new Error("Internal error: timeoutFunc called but scheduler not running");var u=r.audioContext.currentTime;null===i&&(i=u,s=u),s<u&&console.log("FELL BEHIND BY",u-s);var a=u+n;e({begin:s,end:a,relativeBegin:s-i,relativeEnd:a-i,start:i}),s=a,r.timeoutID=setTimeout(o,1e3*t)};this.running=!0,o()}},{key:"stop",value:function(){this.running=!1,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)}}]),e}();t.default=i}]);'},function(e,t){e.exports='(function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)})([function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=t(1),o=r(a);e.exports=o.default},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=t(2),o=t(3),i=function e(n,t,i){r(this,e);var s=t.createGain();s.gain.value=1;var l=t.createConvolver();l.normalize=!0;var u=t.createGain(),d=t.createGain(),c=t.createGain();c.gain.value=1,s.connect(l),s.connect(u),l.connect(d),u.connect(c),d.connect(c);var p=[],f=null,v=void 0,h=void 0,y=function(){h||null===f?(u.gain.value=1,d.gain.value=0):(u.gain.value=Math.sqrt(1-v),d.gain.value=Math.sqrt(v))},g=function(e){if(v=e,v<0&&v>1)throw new Error("internal error");y(),D.value=e},b=function(e){if(h=e,"boolean"!=typeof h)throw new Error("internal error");y()},w=function(e){if(null===e)f=e,l.buffer=null;else{var n=p[e].responseBuffer;n?(f=e,l.buffer=n):console.warn("Warning: Can\'t switch to response, buffer is missing")}A.value=f,L(),y()},x=function(e,n,r){var a={name:e,responseBuffer:null,responseFileData:n},o=p.length;p.push(a),E(),t.decodeAudioData(n,function(e){a.responseBuffer=e,E(),r&&w(o)},function(){console.warn("Failed to decode audio file")})},m=function(){p.splice(f,1),w(0===p.length?null:f-1),E()};this.inputs={audio:{type:"audio",node:s}},this.outputs={audio:{type:"audio",node:c}};var C=n.createElement("div");C.innerHTML=o,this.panelView=C.childNodes[0];var A=this.panelView.querySelector(".response-select"),E=function(){A.innerHTML="";for(var e=0;e<p.length;e++){var t=p[e],r=n.createElement("option");r.textContent=t.name,r.value=e,t.responseBuffer||(r.disabled=!0),A.appendChild(r)}A.value=f};A.addEventListener("input",function(){w(+A.value)});var D=this.panelView.querySelector(".dry-wet");D.addEventListener("input",function(){g(+D.value)});var F=this.panelView.querySelector(".active-response-name"),q=this.panelView.querySelector(".active-response-duration"),B=this.panelView.querySelector(".active-response-delete"),L=function(){null===f?(F.textContent="",q.textContent="",B.style.visibility="hidden"):(F.textContent=p[f].name,q.textContent=p[f].responseBuffer.duration.toFixed(3)+"s",B.style.visibility="visible")};B.addEventListener("click",function(){m()});var S=this.panelView,T=function(e){return e.types.indexOf("Files")>=0};S.addEventListener("dragover",function(e){T(e.dataTransfer)&&(e.dataTransfer.dropEffect="copy",e.preventDefault(),e.stopPropagation())},!1),S.addEventListener("drop",function(e){if(e.preventDefault(),e.stopPropagation(),!(e.dataTransfer.types.indexOf("Files")>=0))throw new Error("internal error");(function(){var n=e.dataTransfer.files,t=n[0];t.type.startsWith("audio/")?function(){var e=new FileReader;e.onload=function(){x(t.name,e.result,!0)},e.readAsArrayBuffer(t)}():console.warn("Dropped file does not appear to be audio, ignoring")})()},!1);var V=void 0;V=i?JSON.parse(i):{responses:[],activeResponseIdx:null,bypass:!1,wetness:.5};for(var M=0;M<V.responses.length;M++)x(V.responses[M].name,(0,a.decode)(V.responses[M].responseFileData),M===V.activeResponseIdx);E(),null===f&&w(null),g(V.wetness),b(V.bypass),this.save=function(){return JSON.stringify({responses:p.map(function(e){return{name:e.name,responseFileData:(0,a.encode)(e.responseFileData)}}),activeResponseIdx:f,bypass:h,wetness:v})}};n.default=i,i.blockName="Convolux"},function(e,n){(function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),r=0;r<e.length;r++)t[e.charCodeAt(r)]=r;n.encode=function(n){var t,r=new Uint8Array(n),a=r.length,o="";for(t=0;t<a;t+=3)o+=e[r[t]>>2],o+=e[(3&r[t])<<4|r[t+1]>>4],o+=e[(15&r[t+1])<<2|r[t+2]>>6],o+=e[63&r[t+2]];return a%3===2?o=o.substring(0,o.length-1)+"=":a%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(e){var n,r,a,o,i,s=.75*e.length,l=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var d=new ArrayBuffer(s),c=new Uint8Array(d);for(n=0;n<l;n+=4)r=t[e.charCodeAt(n)],a=t[e.charCodeAt(n+1)],o=t[e.charCodeAt(n+2)],i=t[e.charCodeAt(n+3)],c[u++]=r<<2|a>>4,c[u++]=(15&a)<<4|o>>2,c[u++]=(3&o)<<6|63&i;return d}})()},function(e,n){e.exports=\'<div style="box-sizing: border-box; width: 190px; height: 256px; font-size: 14px; background-color: #dae6d9;">\\n    <div style="padding: 10px; background-color: #a9d6a7">\\n        <label>Responses<br><span style="font-size:0.75em;color:#555">(drag &amp; drop audio file to add)</span><br><select class="response-select" style="max-width:170px">\\n        </select></label>\\n        <div style="margin-top:10px;"><label>Dry&harr;Wet<br><input class="dry-wet" type="range" step="any" min="0" max="1" style="width:170px;margin:5px 0"></label></div>\\n    </div>\\n    <div style="padding: 10px">\\n        <div><label>Name<br><span class="active-response-name" style="word-wrap:break-word"></span></label></div>\\n        <div style="margin-top:10px"><label>Duration<br><span class="active-response-duration"></span></label></div>\\n        <div style="margin-top:10px"><button class="active-response-delete">Delete</button></div>\\n    </div>\\n</div>\\n\'}]);'},function(e,t){e.exports='(function(e){function t(i){if(a[i])return a[i].exports;var n=a[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)})([function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=a(1),r=i(n);e.exports=r.default},function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),r=a(3),s=function e(t,a,s){i(this,e);var o=a.createBuffer(1,2,a.sampleRate),u=o.getChannelData(0);u[0]=1,u[1]=1;var l=a.createBufferSource();l.buffer=o,l.loop=!0,l.start();var c=a.createGain();c.gain.value=0,l.connect(c);var h=new r(a,c.gain);h.attackShape=h.LINEAR;var d=void 0;d=s?JSON.parse(s):{mode:"AD",riseTime:.01,fallTime:.1,fallShape:r.EXPONENTIAL},h.mode=d.mode,h.attackRate=1/d.riseTime,h.decayShape=d.fallShape,h.decayRate=1/d.fallTime,h.releaseShape=d.fallShape,h.releaseRate=1/d.fallTime;var p=function(e,t){h.gate(t,e)};this.inputs={gate:{type:"gateEvent",notify:p}},this.outputs={audio:{type:"audio",node:c}};var f=t.createElement("div");f.innerHTML=n,this.panelView=f.childNodes[0];var m=this.panelView.querySelector(".mode-select");m.value=h.mode,m.addEventListener("input",function(){h.mode=m.value});var g=.001,_=30,v=Math.log(g),S=Math.log(_),y=function(e){return(Math.log(e)-v)/(S-v)},A=function(e){return Math.exp(v+e*(S-v))},E=this.panelView.querySelector(".rise-time-input");E.value=y(1/h.attackRate),E.addEventListener("input",function(){h.attackRate=1/A(E.value)});var b=this.panelView.querySelector(".fall-time-input");b.value=y(1/h.decayRate),b.addEventListener("input",function(){h.decayRate=1/A(b.value),h.releaseRate=1/A(b.value)});var T=this.panelView.querySelector(".fall-shape-select");T.value=h.decayShape,T.addEventListener("input",function(){h.decayShape=T.value,h.releaseShape=T.value}),this.save=function(){return JSON.stringify({mode:h.mode,riseTime:1/h.attackRate,fallTime:1/h.decayRate,fallShape:1/h.decayShape})}};t.default=s,s.blockName="Egen"},function(e,t){e.exports=\'<div style="box-sizing: border-box; width: 126px; height: 256px; padding: 10px; background-color: #ddd;">\\n    <div style="font-size: 14px">\\n        <label>Mode<br><select class="mode-select">\\n            <option value="AD">/\\\\</option>\\n            <option value="ASR">/‾\\\\</option>\\n        </select></label>\\n        <div style="margin-top:10px;"><label>Rise<br><input class="rise-time-input" type="range" step="any" min="0" max="1" style="width:106px;margin:5px 0"></label></div>\\n        <div style="margin-top:10px;"><label>Fall<br><input class="fall-time-input" type="range" step="any" min="0" max="1" style="width:106px;margin:5px 0"></label></div>\\n        <div style="margin-top:10px;"><label>Fall Shape<br><select class="fall-shape-select">\\n            <option value="L">LIN</option>\\n            <option value="E">EXP</option>\\n        </select></label></div>\\n    </div>\\n</div>\\n\'},function(e,t,a){"use strict";function i(e){if(!e)throw new Error("Assertion error")}function n(e,t){if(!(this instanceof n))return new n(e,t);this._audioContext=e,this._targetParam=t;var a=this;Object.defineProperty(this,"mode",{get:function(){return a._mode},set:function(t){a.MODES.indexOf(t)>=0&&(a.gate(!1,r(Math.max(this._lastGateTime,e.currentTime),1/0)),a._mode=t)}}),Object.defineProperty(this,"attackShape",{get:function(){return a._attackShape},set:function(e){a.ATTACK_SHAPES.indexOf(e)>=0&&(a._attackShape=e)}}),Object.defineProperty(this,"attackRate",{get:function(){return a._attackRate},set:function(e){"number"==typeof e&&!isNaN(e)&&e>0&&(a._attackRate=e)}}),Object.defineProperty(this,"attackLevel",{get:function(){return a._attackLevel},set:function(e){"number"!=typeof e||isNaN(e)||(a._attackLevel=e)}}),Object.defineProperty(this,"decayShape",{get:function(){return a._decayShape},set:function(e){a.DECAY_SHAPES.indexOf(e)>=0&&(a._decayShape=e)}}),Object.defineProperty(this,"decayRate",{get:function(){return a._decayRate},set:function(e){"number"==typeof e&&!isNaN(e)&&e>0&&(a._decayRate=e)}}),Object.defineProperty(this,"sustainFraction",{get:function(){return a._sustainFraction},set:function(e){"number"==typeof e&&!isNaN(e)&&e>=0&&e<=1&&(a._sustainFraction=e)}}),Object.defineProperty(this,"releaseShape",{get:function(){return a._releaseShape},set:function(e){a.RELEASE_SHAPES.indexOf(e)>=0&&(a._releaseShape=e)}}),Object.defineProperty(this,"releaseRate",{get:function(){return a._releaseRate},set:function(e){"number"==typeof e&&!isNaN(e)&&e>0&&(a._releaseRate=e)}}),this._mode="ADSR",this._attackShape=this.LINEAR,this._attackRate=2,this._attackLevel=1,this._decayShape=this.EXPONENTIAL,this._decayRate=1,this._sustainFraction=.5,this._releaseShape=this.EXPONENTIAL,this._releaseRate=1,this._targetParam.value=s,this._scheduledSegments=[],this._lastGateTime=e.currentTime,this._lastGateState=!1}var r=a(4),s=0;n.prototype.MODES=["AD","ASR","ADSR"],n.prototype.LINEAR="L",n.prototype.EXPONENTIAL="E",n.prototype.ATTACK_SHAPES=[n.prototype.LINEAR],n.prototype.DECAY_SHAPES=[n.prototype.LINEAR,n.prototype.EXPONENTIAL],n.prototype.RELEASE_SHAPES=[n.prototype.LINEAR,n.prototype.EXPONENTIAL],n.prototype._interruptScheduledSegments=function(e){var t;if(this._scheduledSegments.length){i(e>=this._scheduledSegments[0].beginTime);for(var a,n=0;n<this._scheduledSegments.length;n++){var s=this._scheduledSegments[n];if(e>=s.beginTime&&e<s.endTime){a=n;break}}if(void 0===a){var o=this._scheduledSegments[this._scheduledSegments.length-1];i(e>=o.endTime),t=o.endValue,this._targetParam.setValueAtTime(t,e)}else{var u=this._scheduledSegments[a];u.shape===this.LINEAR?(i(u.endTime!==1/0),t=u.beginValue+(e-u.beginTime)/(u.endTime-u.beginTime)*(u.endValue-u.beginValue),this._targetParam.linearRampToValueAtTime(t,e)):u.shape===this.EXPONENTIAL?(t=u.endValue+(u.beginValue-u.endValue)*Math.exp(u.rate*(u.beginTime-e)),this._targetParam.setValueAtTime(t,e)):i(!1)}}else t=0,this._targetParam.setValueAtTime(t,e);i(void 0!==t),this._targetParam.cancelScheduledValues(r(e,1/0)),this._scheduledSegments=[{beginTime:e,endTime:e,beginValue:t,endValue:t,shape:this.LINEAR}]},n.prototype._scheduleSegment=function(e,t,a){i(this._scheduledSegments.length>0);var n=this._scheduledSegments[this._scheduledSegments.length-1];if(i(n.endTime!==1/0),n.endValue!==e){var r;if(a===1/0)r=n.endTime,this._targetParam.setValueAtTime(e,r);else switch(t){case this.LINEAR:r=n.endTime+Math.abs((e-n.endValue)/a),this._targetParam.linearRampToValueAtTime(e,r);break;case this.EXPONENTIAL:r=1/0,this._targetParam.setTargetAtTime(e,n.endTime,1/a);break;default:i(!1)}this._scheduledSegments.push({shape:t,beginTime:n.endTime,endTime:r,beginValue:n.endValue,endValue:e,rate:a})}},n.prototype.gate=function(e,t){var a=this._audioContext.currentTime;if(t=void 0===t?a:t,t<this._lastGateTime)return void console.warn("Received gate with time earlier than a previous gate");if(this._lastGateTime=t,this._lastGateState=e,"AD"!==this._mode||e)if(this._interruptScheduledSegments(t),e){if(this._scheduleSegment(this._attackLevel,this._attackShape,this._attackRate),"AD"===this._mode||"ADSR"===this._mode){var i;i="AD"===this._mode?s:this._sustainFraction*this._attackLevel,this._scheduleSegment(i,this._decayShape,this._decayRate)}}else this._scheduleSegment(s,this._releaseShape,this._releaseRate)},n.prototype.gateOn=function(e){this.gate(!0,e)},n.prototype.gateOff=function(e){this.gate(!1,e)},e.exports=n},function(e,t,a){"use strict";function i(e,t){var a,i,c,h;return e!==e||t!==t?NaN:e===t?t:0===e?(e=t<0?-s:s,t=e*e,e):(a=n(e),i=a[0],c=a[1],t>e==e>0?c===o?(i+=1,c=0):c+=1:0===c?(i-=1,c=o):c-=1,h=i&u,h===u?e+e:(h<l&&(t=e*e),r(i,c)))}var n=a(5),r=a(9),s=a(11).DENORMALIZED,o=a(13),u=2146435072,l=1048576;e.exports=i},function(e,t,a){"use strict";function i(e){return r[0]=e,[s[o],s[u]]}var n=a(6),r=new Float64Array(1),s=new Uint32Array(r.buffer),o=n.HIGH,u=n.LOW;e.exports=i},function(e,t,a){"use strict";var i,n,r=a(7);r?(i=1,n=0):(i=0,n=1),e.exports={HIGH:i,LOW:n}},function(e,t,a){"use strict";function i(){var e,t;return e=new n.uint16(1),e[0]=4660,t=new n.uint8(e.buffer),52===t[0]}var n=a(8);e.exports=i()},function(e,t){"use strict";var a={uint16:Uint16Array,uint8:Uint8Array};e.exports=a},function(e,t,a){"use strict";function i(e,t){return s[o]=e,s[u]=t,r[0]}var n=a(10),r=new Float64Array(1),s=new Uint32Array(r.buffer),o=n.HIGH,u=n.LOW;e.exports=i},function(e,t,a){"use strict";var i,n,r=a(7);r===!0?(i=1,n=0):(i=0,n=1),e.exports={HIGH:i,LOW:n}},function(e,t,a){"use strict";var i=a(12),n={};i(n,"VALUE",2.2250738585072014e-308),i(n,"DENORMALIZED",5e-324),e.exports=n},function(e,t){"use strict";function a(e,t,a){Object.defineProperty(e,t,{value:a,configurable:!1,writable:!1,enumerable:!0})}e.exports=a},function(e,t){"use strict";e.exports=4294967295}]);';
},function(e,t){e.exports='(function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)})([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(1),a=i(o);e.exports=a.default},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=function e(t,n,a){i(this,e);var r=n.createGain();r.gain.value=0,this.inputs={audio:{type:"audio",node:r},gain:{type:"audio",node:r.gain}},this.outputs={audio:{type:"audio",node:r}};var u=t.createElement("div");u.innerHTML=o,this.panelView=u.childNodes[0]};t.default=a,a.blockName="Gainer"},function(e,t){e.exports=\'<div style="box-sizing: border-box; width: 62px; height: 256px; padding: 10px; background-color: #888;">\\n</div>\\n\'}]);'},function(e,t){e.exports='(function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)})([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(1),i=r(a);e.exports=i.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r,a){var i=this;n(this,e);var o=0,u=4,s=void 0,l=r.createGain();l.gain.value=1;var c=r.createWaveShaper();c.oversample="none",l.connect(c);var d=function(e){for(var t=2*(e+1),n=new Float32Array(t),r=0;r<t;r++)n[r]=(e+r)%2?1:-1;c.curve=n,s=1/(t-1),i.stages=e};if(a){var v=JSON.parse(a);d(v.stages)}else d(u);this.inputs={audio:{type:"audio",node:l}},this.outputs={audio:{type:"audio",node:c}};var p=t.createElement("div");p.innerHTML=\'<div style="box-sizing: border-box; width: 126px; height: 256px; padding: 5px; background-color: white;"><div>Orinami</div><div><label>Stages <input type="number" value="\'+this.stages+\'" min="\'+o+\'" step="1" style="width: 50px" /></label></div></div>\',this.panelView=p.childNodes[0],this.panelView.querySelector("input").addEventListener("input",function(e){var t=parseInt(e.target.value,10);if(!isNaN(t)){var n=Math.floor(t);n>=o&&d(n)}},!1)}return r(e,[{key:"save",value:function(){return JSON.stringify({stages:this.stages})}}]),e}();t.default=a,a.blockName="Orinami"}]);'},function(e,t){e.exports='(function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)})([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n(1),a=o(r);e.exports=a.default},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function removeChildren(e){for(;e.firstChild;)e.removeChild(e.firstChild)}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,d=e[Symbol.iterator]();!(o=(i=d.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&d.return&&d.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),template=__webpack_require__(2),uid32=function(){return Math.random().toString(16).substring(2,10)},uid64=function(){return uid32()+uid32()},Racket=function(){function Racket(document,audioContext,settings){var _this=this;_classCallCheck(this,Racket),this.inputs={},this.outputs={};var tmpElem=document.createElement("div");tmpElem.innerHTML=template,this.windowView=tmpElem.childNodes[0];var addingWireAttachedJack=null,addingWireLooseCoord=null,currentEnteredJack=null,mousePos=null,deletingWiresMode=!1,blockContainerElem=this.windowView.querySelector(".block-container"),rackJacksSubpanelElem=this.windowView.querySelector(".rack-jacks-subpanel"),deleteWiresButtonElem=this.windowView.querySelector(".delete-wires-button"),patchInputSelectElem=this.windowView.querySelector(".patch-input-select"),patchOutputSelectElem=this.windowView.querySelector(".patch-output-select"),patchConnectButtonElem=this.windowView.querySelector(".patch-connect-button"),patchConnectionListElem=this.windowView.querySelector(".patch-connection-list"),wiresCanvasElem=document.createElement("canvas");wiresCanvasElem.style.cssText="position:absolute;pointer-events:none",this.windowView.appendChild(wiresCanvasElem);var addingWireCanvasElem=document.createElement("canvas");addingWireCanvasElem.style.cssText="position:absolute;pointer-events:none",this.windowView.appendChild(addingWireCanvasElem);var rackInputPseudoblock={outputs:{}},rackOutputPseudoblock={inputs:{}},blockInfo={ri:{id:"ri",code:null,_class:null,instance:rackInputPseudoblock,displayName:"RACK INPUT",wrapperElem:null,jackContainerElem:this.windowView.querySelector(".rack-input-ports")},ro:{id:"ro",code:null,_class:null,instance:rackOutputPseudoblock,displayName:"RACK OUTPUT",wrapperElem:null,jackContainerElem:this.windowView.querySelector(".rack-output-ports")}},pseudoblockIds=new Set(["ri","ro"]),cxnInfo={},showFront=!0,updatePatchConnectionList=function(){removeChildren(patchConnectionListElem);var e=function(e){var t=cxnInfo[e],n=blockInfo[t.outBlockId].displayName+":"+t.outPortName+" → "+blockInfo[t.inBlockId].displayName+":"+t.inPortName,o=document.createElement("li");o.appendChild(document.createTextNode(n+" "));var r=document.createElement("button");r.textContent="remove",r.addEventListener("click",function(){removeConnection(e)}),o.appendChild(r),patchConnectionListElem.appendChild(o)};for(var t in cxnInfo)e(t)},isValidConnection=function(e){var t=e.outBlockId,n=e.outPortName,o=e.inBlockId,r=e.inPortName,a=blockInfo[t].instance,i=blockInfo[o].instance;if(!a.outputs.hasOwnProperty(n))return!1;if(!i.inputs.hasOwnProperty(r))return!1;for(var d in cxnInfo){var l=cxnInfo[d];if(l.outBlockId===t&&l.outPortName===n&&l.inBlockId===o&&l.inPortName===r)return!1}return a.outputs[n].type===i.inputs[r].type},parseConnectionSpec=function(){var e=patchInputSelectElem.value,t=patchOutputSelectElem.value;if(!e||!t)return null;var n=e.split(":"),o=_slicedToArray(n,2),r=o[0],a=o[1],i=t.split(":"),d=_slicedToArray(i,2),l=d[0],c=d[1];return{inBlockId:r,inPortName:a,outBlockId:l,outPortName:c}},updatePatchConnectionValidity=function(){var e=parseConnectionSpec();patchConnectButtonElem.disabled=!(e&&isValidConnection(e))},updatePatchConnectOptions=function(){var e={},t={};for(var n in blockInfo){var o=blockInfo[n].instance,r=blockInfo[n].displayName;for(var a in o.inputs)e[n+":"+a]=r+":"+a;for(var i in o.outputs)t[n+":"+i]=r+":"+i}removeChildren(patchInputSelectElem);for(var d in e){var l=document.createElement("option");l.textContent=e[d]+" IN",l.value=d,patchInputSelectElem.appendChild(l)}removeChildren(patchOutputSelectElem);for(var c in t){var l=document.createElement("option");l.textContent=t[c]+" OUT",l.value=c,patchOutputSelectElem.appendChild(l)}updatePatchConnectionValidity()},updateBackPanelDimensions=function(e){var t=blockInfo[e].wrapperElem;if(t){var n=t.firstChild,o=t.lastChild;o.style.width=n.offsetWidth+"px",o.style.height=n.offsetHeight+"px"}},updateFrontBackDisplay=function(){for(var e in blockInfo){var t=blockInfo[e].wrapperElem;t&&(showFront?(t.firstChild.style.display="block",t.lastChild.style.display="none"):(t.firstChild.style.display="none",t.lastChild.style.display="block"))}rackJacksSubpanelElem.style.display=showFront?"none":"block",updateWires(),updateAddingWire()},toggleFrontBackDisplay=function(){if(showFront)for(var e in blockInfo)updateBackPanelDimensions(e);showFront=!showFront,updateFrontBackDisplay()},matchElemSize=function(e,t){e.style.left=t.offsetLeft,e.style.top=t.offsetTop,e.style.width=t.offsetWidth,e.style.height=t.offsetHeight,e.width=t.offsetWidth,e.height=t.offsetHeight},getJackCoords=function(e,t,n){var o=blockInfo[e].jackContainerElem.querySelector(\'.port-jack[data-inout="\'+t+\'"][data-portname="\'+n+\'"]\'),r=pseudoblockIds.has(e);return{x:o.offsetLeft+("output"===t?o.offsetWidth-12:12)-(r?0:blockContainerElem.scrollLeft),y:o.offsetTop+.5*o.offsetHeight-(r?0:blockContainerElem.scrollTop)}},updateWires=function(){var e=[];return showFront?wiresCanvasElem.style.display="none":function(){wiresCanvasElem.style.display="block";var t=_this.windowView;matchElemSize(wiresCanvasElem,t);var n=wiresCanvasElem.getContext("2d"),o=wiresCanvasElem.width,r=wiresCanvasElem.height;n.clearRect(0,0,o,r),n.lineCap="round",n.globalAlpha=.5;var a=function(o){var r=cxnInfo[o],a=getJackCoords(r.outBlockId,"output",r.outPortName),i=getJackCoords(r.inBlockId,"input",r.inPortName),d=function(){n.beginPath(),n.moveTo(a.x-t.offsetLeft,a.y-t.offsetTop),n.lineTo(i.x-t.offsetLeft,i.y-t.offsetTop),n.stroke()},l=!1;deletingWiresMode&&(n.strokeStyle="rgba(0, 0, 0, 0)",n.lineWidth=20,d(),l=n.isPointInStroke(mousePos.x-t.offsetLeft,mousePos.y-t.offsetTop)),n.strokeStyle=l?"rgb(255, 0, 0)":"rgb(0, 255, 0)",n.lineWidth=6,d(),l&&e.push(o)};for(var i in cxnInfo)a(i)}(),e},addingWireCxnSpec=function(){if(currentEnteredJack){if("input"===addingWireAttachedJack.dataset.inout){if("input"===currentEnteredJack.dataset.inout)return null;if("output"===currentEnteredJack.dataset.inout)return{outBlockId:currentEnteredJack.dataset.blockid,outPortName:currentEnteredJack.dataset.portname,inBlockId:addingWireAttachedJack.dataset.blockid,inPortName:addingWireAttachedJack.dataset.portname};throw new Error("internal error")}if("output"===addingWireAttachedJack.dataset.inout){if("input"===currentEnteredJack.dataset.inout)return{outBlockId:addingWireAttachedJack.dataset.blockid,outPortName:addingWireAttachedJack.dataset.portname,inBlockId:currentEnteredJack.dataset.blockid,inPortName:currentEnteredJack.dataset.portname};if("output"===currentEnteredJack.dataset.inout)return null;throw new Error("internal error")}throw new Error("internal error")}return null},updateAddingWire=function(){if(showFront||!addingWireAttachedJack)addingWireCanvasElem.style.display="none";else{addingWireCanvasElem.style.display="block";var e=getJackCoords(addingWireAttachedJack.dataset.blockid,addingWireAttachedJack.dataset.inout,addingWireAttachedJack.dataset.portname),t=addingWireCxnSpec(),n=t&&isValidConnection(t),o=_this.windowView;matchElemSize(addingWireCanvasElem,o);var r=addingWireCanvasElem.getContext("2d"),a=addingWireCanvasElem.width,i=addingWireCanvasElem.height;r.clearRect(0,0,a,i),r.lineWidth=6,r.lineCap="round",r.strokeStyle=n?"rgb(0, 255, 0)":"rgb(255,105,180)",r.globalAlpha=.75,r.beginPath(),r.moveTo(e.x-o.offsetLeft,e.y-o.offsetTop),r.lineTo(addingWireLooseCoord.x-o.offsetLeft,addingWireLooseCoord.y-o.offsetTop),r.stroke()}},uniquifyDisplayName=function(e){var t=blockInfo[e].displayName,n={};for(var o in blockInfo)o!==e&&(n[blockInfo[o].displayName]=null);if(n.hasOwnProperty(t))for(var r=2;;r++){var a=t+" "+r;if(!n.hasOwnProperty(a))return void(blockInfo[e].displayName=a)}},toggleDeleteWiresMode=function(){deletingWiresMode?(deletingWiresMode=!1,deleteWiresButtonElem.style.backgroundColor="#eee",updateWires()):(addingWireAttachedJack=null,addingWireLooseCoord=null,deletingWiresMode=!0,deleteWiresButtonElem.style.backgroundColor="red",currentEnteredJack&&(currentEnteredJack.style.backgroundColor=JACK_NORMAL_BACKGROUND_COLOR,currentEnteredJack.style.cursor="default"),updateWires(),updateAddingWire())},finishAddingWire=function(){if(!addingWireAttachedJack)throw new Error("internal error");if(currentEnteredJack){var e=addingWireCxnSpec();e&&isValidConnection(e)&&addConnection(e)}addingWireAttachedJack=null,addingWireLooseCoord=null},handleJackMouseDown=function(e){if(!deletingWiresMode){e.preventDefault();var t=e.currentTarget;addingWireAttachedJack?finishAddingWire():(addingWireAttachedJack=t,addingWireLooseCoord={x:e.pageX,y:e.pageY}),updateAddingWire()}},handleMouseDown=function(e){if(deletingWiresMode){var t=updateWires();if(t.length>0){e.preventDefault();var n=!0,o=!1,r=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var d=a.value;removeConnection(d)}}catch(e){o=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw r}}}}};document.addEventListener("mousedown",handleMouseDown,!1);var handleMouseUp=function(e){addingWireAttachedJack&&(e.preventDefault(),currentEnteredJack===addingWireAttachedJack||(finishAddingWire(),updateAddingWire()))};document.addEventListener("mouseup",handleMouseUp,!1);var handleMouseMove=function(e){mousePos={x:e.pageX,y:e.pageY},!showFront&&deletingWiresMode&&updateWires(),addingWireAttachedJack&&(addingWireLooseCoord={x:e.pageX,y:e.pageY},updateAddingWire())};document.addEventListener("mousemove",handleMouseMove,!1);var JACK_NORMAL_BACKGROUND_COLOR="#bbb",JACK_HOVER_BACKGROUND_COLOR="#eee",handleJackMouseEnter=function(e){var t=e.currentTarget;deletingWiresMode||(t.style.backgroundColor=JACK_HOVER_BACKGROUND_COLOR,t.style.cursor="pointer"),currentEnteredJack=t},handleJackMouseLeave=function(e){var t=e.currentTarget;t.style.backgroundColor=JACK_NORMAL_BACKGROUND_COLOR,t.style.cursor="default",currentEnteredJack=null},createJackElem=function(e,t,n,o){var r=document.createElement("div");r.style.cssText="color:black;font-size:12px;display:inline-block;box-sizing:border-box;border:1px solid #555;margin:2px 0;padding:3px 6px;border-radius:2px;word-break:break-word;cursor:pointer;user-select:none",r.style.backgroundColor=JACK_NORMAL_BACKGROUND_COLOR,r.dataset.blockid=e,r.dataset.inout=t,r.dataset.portname=n,r.className="port-jack",r.addEventListener("mousedown",handleJackMouseDown,!1),r.addEventListener("mouseenter",handleJackMouseEnter,!1),r.addEventListener("mouseleave",handleJackMouseLeave,!1),r.textContent="input"===t?"▷ "+n:n+" ►";var a=document.createElement("div");return o&&(a.style.textAlign="right"),a.appendChild(r),a},addBlock=function addBlock(code,settings,blockId,displayName){var blockClass=eval(code),blockInst=new blockClass(document,audioContext,settings),bid=blockId||"b"+uid64();blockInfo[bid]={id:bid,code:code,_class:blockClass,instance:blockInst,displayName:displayName||blockClass.blockName,wrapperElem:void 0,jackContainerElem:void 0},uniquifyDisplayName(bid);var effectivePanelViewElem=void 0;if(blockInst.panelView)effectivePanelViewElem=blockInst.panelView;else{var PLACEHOLDER_WIDTH=62,PLACEHOLDER_HEIGHT=256,_tmpElem=document.createElement("div");_tmpElem.innerHTML=\'<div style="box-sizing:border-box;width:\'+PLACEHOLDER_WIDTH+"px;height:"+PLACEHOLDER_HEIGHT+\'px;text-align:center;font-size:14px;background:white;font-style:italic;color:gray;padding:100px 5px">No panel view</div>\',effectivePanelViewElem=_tmpElem.firstChild}var wrapperElem=document.createElement("div");wrapperElem.style.cssText="margin: 1px",wrapperElem.setAttribute("data-blockid",bid),wrapperElem.appendChild(effectivePanelViewElem),blockContainerElem.appendChild(wrapperElem),blockInfo[bid].wrapperElem=wrapperElem;var removeBlockElem=document.createElement("a");removeBlockElem.style.cssText="float:right;color: #ccc;text-decoration: none",removeBlockElem.href="#",removeBlockElem.textContent="X",removeBlockElem.addEventListener("click",function(e){e.preventDefault(),removeBlock(bid)});var headerElem=document.createElement("div");headerElem.style.cssText="background-color: #555; font-size: 12px; padding: 4px 6px; color: #ccc",headerElem.appendChild(removeBlockElem),headerElem.appendChild(document.createTextNode(blockInfo[bid].displayName));var jackContainerElem=document.createElement("div");jackContainerElem.style.cssText="padding: 5px",blockInfo[bid].jackContainerElem=jackContainerElem;var backPanelElem=document.createElement("div");backPanelElem.style.cssText="background-color:#ddd",backPanelElem.appendChild(headerElem),backPanelElem.appendChild(jackContainerElem),wrapperElem.appendChild(backPanelElem);for(var pn in blockInst.inputs)jackContainerElem.appendChild(createJackElem(bid,"input",pn));for(var _pn4 in blockInst.outputs)jackContainerElem.appendChild(createJackElem(bid,"output",_pn4,!0));updateBackPanelDimensions(bid),updateFrontBackDisplay(),updatePatchConnectOptions()},removeBlock=function(e){var t=[];for(var n in cxnInfo){var o=cxnInfo[n];o.outBlockId!==e&&o.inBlockId!==e||t.push(n)}var r=!0,a=!1,i=void 0;try{for(var d,l=t[Symbol.iterator]();!(r=(d=l.next()).done);r=!0){var c=d.value;removeConnection(c)}}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}blockContainerElem.removeChild(blockInfo[e].wrapperElem);var s=blockInfo[e].instance;s.deactivate&&s.deactivate(),delete blockInfo[e],updatePatchConnectOptions()},addRackInput=function(e,t){if(_this.inputs[e])throw new Error("port name already exists");switch(t){case"audio":var n=audioContext.createGain();_this.inputs[e]={type:"audio",node:n},rackInputPseudoblock.outputs[e]={type:"audio",node:n},blockInfo.ri.jackContainerElem.appendChild(createJackElem("ri","output",e));break;default:throw new Error("Unsupported rack port type")}},addRackOutput=function(e,t){if(_this.outputs[e])throw new Error("port name already exists");switch(t){case"audio":var n=audioContext.createGain();_this.outputs[e]={type:"audio",node:n},rackOutputPseudoblock.inputs[e]={type:"audio",node:n},blockInfo.ro.jackContainerElem.appendChild(createJackElem("ro","input",e));break;default:throw new Error("Unsupported rack port type")}},addConnection=function(e){var t=e.outBlockId,n=e.outPortName,o=e.inBlockId,r=e.inPortName,a="c"+uid64(),i={outBlockId:t,outPortName:n,inBlockId:o,inPortName:r,disconnect:void 0};cxnInfo[a]=i;var d=blockInfo[t].instance,l=blockInfo[o].instance;(function(){switch(d.outputs[n].type){case"audio":var e=d.outputs[n].node,t=l.inputs[r].node;e.connect(t),i.disconnect=function(){e.disconnect(t)};break;case"gateEvent":i.disconnect=d.outputs[n].subscribe(l.inputs[r].notify);break;default:throw new Error("Invalid port type")}})(),updatePatchConnectionList(),updatePatchConnectionValidity(),updateWires()},removeConnection=function(e){var t=cxnInfo[e];t.disconnect(),delete cxnInfo[e],updatePatchConnectionList(),updatePatchConnectionValidity(),updateWires()};if(patchInputSelectElem.addEventListener("input",function(){updatePatchConnectionValidity()}),patchOutputSelectElem.addEventListener("input",function(){updatePatchConnectionValidity()}),patchConnectButtonElem.addEventListener("click",function(e){e.preventDefault();var t=parseConnectionSpec();if(t)return isValidConnection(t)?void addConnection(t):void console.log("invalid")}),this.windowView.addEventListener("dragover",function(e){e.dataTransfer.dropEffect="copy",e.preventDefault()},!1),this.windowView.addEventListener("drop",function(e){e.preventDefault();var t=e.dataTransfer.getData("text/javascript");addBlock(t)},!1),settings){var settingsObj=JSON.parse(settings),codeMap=new Map(settingsObj.codeMap),_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _iterator3=settingsObj.blockOrder[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var bid=_step3.value,binfo=settingsObj.blockMap[bid];addBlock(codeMap.get(binfo.codeId),binfo.settings,bid,binfo.displayName)}}catch(e){_didIteratorError3=!0,_iteratorError3=e}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}for(var pn in settingsObj.rackInputPorts)addRackInput(pn,settingsObj.rackInputPorts[pn].type);for(var _pn5 in settingsObj.rackOutputPorts)addRackOutput(_pn5,settingsObj.rackOutputPorts[_pn5].type);var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=settingsObj.connections[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var cxn=_step4.value;addConnection(cxn)}}catch(e){_didIteratorError4=!0,_iteratorError4=e}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}else addRackOutput("audio","audio");var onKeydownFunc=function(e){" "===e.key?(toggleFrontBackDisplay(),e.preventDefault()):"d"===e.key&&(showFront||(toggleDeleteWiresMode(),e.preventDefault()))};document.addEventListener("keydown",onKeydownFunc),this.windowView.querySelector(".toggle-front-back-button").addEventListener("click",function(){toggleFrontBackDisplay()}),this.windowView.querySelector(".delete-wires-button").addEventListener("click",function(){toggleDeleteWiresMode()}),blockContainerElem.addEventListener("scroll",function(){updateWires(),updateAddingWire()});var onResizeFunc=function(){updateWires(),updateAddingWire()};window.addEventListener("resize",onResizeFunc),updatePatchConnectionValidity(),updatePatchConnectOptions(),updateWires(),this.deactivate=function(){var e=[];for(var t in blockInfo)pseudoblockIds.has(t)||e.push(t);var n=!0,o=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var d=a.value;removeBlock(d)}}catch(e){o=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw r}}document.removeEventListener("keydown",onKeydownFunc),document.removeEventListener("mousedown",handleMouseDown,!1),document.removeEventListener("mouseup",handleMouseUp,!1),document.removeEventListener("mousemove",handleMouseMove,!1),window.removeEventListener("resize",onResizeFunc)},this.blockInfo=blockInfo,this.pseudoblockIds=pseudoblockIds,this.blockContainerElem=blockContainerElem,this.cxnInfo=cxnInfo,this.rackInputPseudoblock=rackInputPseudoblock,this.rackOutputPseudoblock=rackOutputPseudoblock,this.removeBlock=removeBlock}return _createClass(Racket,[{key:"save",value:function(){var e=new Map,t=1;for(var n in this.blockInfo)if(!this.pseudoblockIds.has(n)){var o=this.blockInfo[n];e.has(o.code)||(e.set(o.code,t),t++)}var r=new Map,a=!0,i=!1,d=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=_slicedToArray(l.value,2),u=s[0],p=s[1];r.set(p,u)}}catch(e){i=!0,d=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw d}}var f={};for(var k in this.blockInfo)if(!this.pseudoblockIds.has(k)){var v=this.blockInfo[k];f[k]={codeId:e.get(v.code),settings:v.instance.save?v.instance.save():null,displayName:v.displayName}}var m=[],h=!0,b=!1,y=void 0;try{for(var E,C=this.blockContainerElem.childNodes[Symbol.iterator]();!(h=(E=C.next()).done);h=!0){var g=E.value,w=g.dataset.blockid;if(!w||!f[w])throw new Error("internal error");m.push(g.dataset.blockid)}}catch(e){b=!0,y=e}finally{try{!h&&C.return&&C.return()}finally{if(b)throw y}}var x=[];for(var I in this.cxnInfo){var _=this.cxnInfo[I];x.push({outBlockId:_.outBlockId,outPortName:_.outPortName,inBlockId:_.inBlockId,inPortName:_.inPortName})}var P={};for(var W in this.rackInputPseudoblock.outputs){var O=this.rackInputPseudoblock.outputs[W];P[W]={type:O.type}}var N={};for(var A in this.rackOutputPseudoblock.inputs){var L=this.rackOutputPseudoblock.inputs[A];N[A]={type:L.type}}return JSON.stringify({codeMap:[].concat(_toConsumableArray(r)),blockMap:f,blockOrder:m,connections:x,rackInputPorts:P,rackOutputPorts:N})}}]),Racket}();exports.default=Racket,Racket.blockName="Racket"},function(e,t){e.exports=\'<div style="display: flex; background-color: #222; height: 100%">\\n    <div style="width: 100px; padding: 5px 10px; color: #ddd; background-color: #666">\\n        <div style="font-size: 18px">Racket</div>\\n        <div style="margin-top: 10px">\\n            <button class="toggle-front-back-button" style="width:100px;padding:5px;font-size:14px;border:1px solid #222;border-radius:5px;background-color:#eee;color:#222;cursor:pointer">Flip<br>[space]</button>\\n        </div>\\n        <div class="rack-jacks-subpanel" style="display: none;margin-top:10px">\\n            <button class="delete-wires-button" style="width:100px;padding:5px;font-size:14px;border:1px solid #222;border-radius:5px;background-color:#eee;color:#222;cursor:pointer">Delete Wires<br>[d]</button>\\n            <div style="margin-top: 10px">\\n                <div>Inbound</div>\\n                <div class="rack-input-ports"></div>\\n            </div>\\n            <div style="margin-top: 10px">\\n                <div>Outbound</div>\\n                <div class="rack-output-ports"></div>\\n            </div>\\n        </div>\\n    </div>\\n    <div class="block-container" style="flex: 1; flex-wrap: wrap; display: flex; align-content: flex-start; padding: 1px; overflow: scroll"></div>\\n    <div style="flex: 0 0 400px; background-color: #444; padding: 10px;display:none">\\n        <div style="color: #bbb; font-size: 16px; margin-bottom: 10px">Patch Management</div>\\n        <div><select class="patch-output-select"></select> &rarr; <select class="patch-input-select"></select> <button class="patch-connect-button">Connect</button></div>\\n        <ul class="patch-connection-list" style="list-style-type: none;padding:0"></ul>\\n    </div>\\n</div>\\n\'}]);'},function(e,t){e.exports='(function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)})([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=r(1),o=n(a);e.exports=o.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),i=function(){function e(t,r){var a=this;n(this,e);var i=510,u=256,c=1024,l=new Float32Array(c),f=r.createAnalyser();f.fftSize=c;var s=r.createBuffer(1,2,r.sampleRate),d=s.getChannelData(0);d[0]=0,d[1]=0;var v=r.createBufferSource();v.buffer=s,v.loop=!0,v.start(),v.connect(f),this.inputs={audio:{type:"audio",node:f}},this.outputs={audio:{type:"audio",node:f}};var p=t.createElement("div");p.innerHTML=o,this.panelView=p.childNodes[0];var h=this.panelView.querySelector("canvas"),b=h.getContext("2d"),y=function e(){f.getFloatTimeDomainData(l);for(var t=0,r=0;r<c-i;r++)if(l[r]<=0&&l[r+1]>0){t=r;break}b.fillStyle="rgb(0, 0, 0)",b.fillRect(0,0,i,u),b.lineWidth=1,b.strokeStyle="rgb(0, 255, 0)",b.beginPath();for(var n=0;n<i;n++){var o=.5*u*(1-l[n+t]);0===n?b.moveTo(n,o):b.lineTo(n,o)}b.stroke(),a.rafId=requestAnimationFrame(e)};y()}return a(e,[{key:"deactivate",value:function(){cancelAnimationFrame(this.rafId)}}]),e}();t.default=i,i.blockName="Scope"},function(e,t){e.exports=\'<div style="box-sizing: border-box; width: 510px; height: 256px; background-color: black;">\\n    <canvas width="510" height="256"></canvas>\\n</div>\\n\'}]);'},function(e,t){e.exports='(function(c){function e(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return c[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var t={};return e.m=c,e.c=t,e.p="",e(0)})([function(c,e,t){"use strict";function n(c){return c&&c.__esModule?c:{default:c}}var i=t(1),l=n(i);c.exports=l.default},function(c,e,t){"use strict";function n(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=t(2),l=function c(e,t,l){n(this,c);var o=1,r=440,a=.1,s=!1,u=function(c,e){e&&!s&&(p.frequency.setValueAtTime(r,c),p.frequency.exponentialRampToValueAtTime(o,c+a)),s=e},p=t.createOscillator();p.type="sine",p.frequency.value=o,p.start(),this.inputs={gate:{type:"gateEvent",notify:u}},this.outputs={audio:{type:"audio",node:p}};var v=e.createElement("div");v.innerHTML=\'<div style="box-sizing: border-box; width: 126px; height: 256px; padding: 5px; background-color: #e8a35f;position:relative"><div style="text-align:center;position:absolute;width:116px;bottom:0px"><img width="100" height="100" src=\'+i+"></div></div>",this.panelView=v.childNodes[0]};e.default=l,l.blockName="Thumper"},function(c,e){c.exports="\\"data:image/svg+xml;charset=utf8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' xmlns:xlink=\'http://www.w3.org/1999/xlink\' version=\'1.1\' x=\'0px\' y=\'0px\' viewBox=\'0 0 100 100\' enable-background=\'new 0 0 100 100\' xml:space=\'preserve\'%3E%3Cpath d=\'M93.7,88l-5.3-30.6c0.6-2.2,1-4.5,1.2-6.8c0.2,0.1,0.4,0.2,0.7,0.2l0.4,0c0.6,0,1.1-0.5,1.1-1.1l0-5.7 c0-0.6-0.5-1.1-1.1-1.1l-0.4,0c-0.3,0-0.5,0.1-0.7,0.2c-0.8-8.3-4.1-15.8-9.1-21.8c0.2-0.1,0.3-0.1,0.5-0.3l0.3-0.3 c0.4-0.4,0.4-1.2,0-1.6l-4-4c-0.4-0.4-1.2-0.4-1.6,0l-0.3,0.3c-0.1,0.1-0.2,0.3-0.3,0.5c-6.8-5.5-15.5-8.9-24.9-8.9v0 c0,0-1.5,0-2.1,0.1c-8.8,0.4-16.7,3.6-23.1,8.8c-0.1-0.1-0.1-0.3-0.3-0.4l-0.3-0.3c-0.4-0.4-1.2-0.4-1.6,0l-4,4 c-0.4,0.4-0.4,1.2,0,1.6l0.3,0.3c0.1,0.1,0.2,0.2,0.3,0.2c-5.1,6-8.3,13.6-9.1,21.8c-0.2-0.1-0.4-0.2-0.6-0.2l-0.4,0 c-0.6,0-1.1,0.5-1.1,1.1l0,5.7c0,0.6,0.5,1.1,1.1,1.1l0.4,0c0.2,0,0.4-0.1,0.6-0.2c0.2,2.3,0.6,4.6,1.3,6.8L6.3,88 C5.5,88.2,5,88.7,5,89.5v1.9c0,0.8,0.7,1.5,1.5,1.5h1.5c0.8,0,1.5-0.7,1.5-1.5v-1.9c0-0.7-0.4-1.2-1-1.4L13.1,62 c1.4,3.6,3.4,6.8,5.7,9.8c-0.1,0.1-0.2,0.1-0.3,0.2l-0.3,0.3c-0.4,0.4-0.4,1.2,0,1.6l4,4c0.4,0.4,1.2,0.4,1.6,0l0.3-0.3 c0.1-0.1,0.1-0.2,0.2-0.2c7,5.9,15.9,9.4,25.7,9.4c0.6,0,1.3,0,1.9,0c0.9,0,1.9-0.1,2.8-0.2c0,0,0.1,0,0.1,0c8.5-1,16.1-4.6,22-10 c0.1,0.1,0.2,0.3,0.3,0.4l0.3,0.3c0.5,0.4,1.2,0.4,1.6-0.1l3.8-4.2c0.4-0.5,0.4-1.2-0.1-1.6l-0.3-0.3c-0.1-0.1-0.3-0.2-0.4-0.2 c2-2.7,3.7-5.6,4.9-8.8l4.6,26.2c-0.6,0.2-1,0.7-1,1.4v1.9c0,0.8,0.7,1.5,1.5,1.5h1.5c0.8,0,1.5-0.7,1.5-1.5v-1.9 C95,88.7,94.5,88.2,93.7,88z M49,83.3c-1,0-2.1-0.1-3.1-0.2v-8.6H49V83.3z M54.3,83.1c-0.8,0.1-1.7,0.2-2.6,0.2c-0.2,0-0.3,0-0.5,0 v-8.8h3V83.1z M56.6,82.7v-8.2c0-1.3-1-2.3-2.3-2.3h-3V53.6h0.5c1.9,0,3.4-1.5,3.4-3.4v-4.4c0-1.9-1.5-3.4-3.4-3.4h-3.5 c-1.9,0-3.4,1.5-3.4,3.4v4.4c0,1.9,1.5,3.4,3.4,3.4H49v18.6h-3.1c-1.3,0-2.3,1-2.3,2.3v8.2c-16.5-2.9-29.2-16.8-30-34.1 c-0.5-9.7,2.9-19,9.4-26.2c6.5-7.2,15.5-11.4,25.2-11.9c0.6,0,1.2,0,1.8,0c19.4,0,35.4,15.2,36.4,34.7 C87.3,63.6,74.2,79.5,56.6,82.7z\'%3E%3C/path%3E%3C/svg%3E\\""}]);'},function(e,t){e.exports='(function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)})([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=n(1),r=a(i);e.exports=r.default},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function e(t,n,r){a(this,e);var l="sine",o=440,u=100,s=n.createOscillator();s.type=l,s.frequency.value=o,s.start();var c=n.createGain();if(c.gain.value=u,c.connect(s.frequency),r){var p=JSON.parse(r);s.type=p.waveform,s.frequency.value=p.frequency,c.gain.value=p.fmScale}this.inputs={fm:{type:"audio",node:c}},this.outputs={audio:{type:"audio",node:s}};var v=t.createElement("div");v.innerHTML=i,this.panelView=v.childNodes[0];var f=this.panelView.querySelector(".waveform-select");f.value=s.type,f.addEventListener("input",function(){s.type=f.value});var d=this.panelView.querySelector(".frequency-input");d.value=s.frequency.value,d.addEventListener("input",function(){var e=parseFloat(d.value);e>0&&(s.frequency.value=e)});var y=this.panelView.querySelector(".fm-scale-input");y.value=c.gain.value,y.addEventListener("input",function(){var e=parseFloat(y.value);c.gain.value=e}),this.save=function(){return JSON.stringify({waveform:s.type,frequency:s.frequency.value,fmScale:c.gain.value})}};t.default=r,r.blockName="Waverly"},function(e,t){e.exports=\'<div style="box-sizing: border-box; width: 126px; height: 256px; padding: 10px; background-color: #dfe3eb;">\\n    <div style="text-align: center; font-family: monospace;color: #415274">\\\\/\\\\/averly</div>\\n    <div style="font-size: 14px;margin-top:20px">\\n        <label>Form<br><select class="waveform-select">\\n            <option value="sine">SIN</option>\\n            <option value="triangle">TRI</option>\\n            <option value="square">SQR</option>\\n            <option value="sawtooth">SAW</option>\\n        </select></label>\\n        <div style="margin-top:10px;"><label>Frequency<br><input class="frequency-input" type="number" step="any" min="0" style="width: 5em;text-align:right">hz</label></div>\\n        <div style="margin-top:10px;"><label>FM Scale<br><input class="fm-scale-input" type="number" step="any" style="width: 5em;text-align:right"></label></div>\\n    </div>\\n</div>\\n\'}]);';
}]);
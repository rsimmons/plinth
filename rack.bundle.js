!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=43)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new(e.AudioContext||e.webkitAudioContext),n=e.navigator.userAgent,a=!!n.match(/i(Pad|Phone)/i),i=!!n.match(/WebKit/i),r=a&&i&&!n.match(/CriOS/i)&&!n.match(/OPiOS/i);return r&&!function(){var n=e.document,a=function(){var e=t.createOscillator();e.frequency.value=1,e.start?e.start():e.noteOn(),e.stop?e.stop():e.noteOff(),n.body.removeChild(r)},i=n.createElement("div");i.style.cssText="position:absolute;bottom:0;left:0;top:0;right:0;width:5em;height:1.2em;margin:auto;padding:0.5em;background:#91d780;font-size:48px;text-align:center;border-radius:0.5em;border:4px solid white;font-weight:bold",i.textContent="Launch";var r=n.createElement("div");r.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;background:rgba(0,0,0,0.9)",r.appendChild(i),r.addEventListener("mousedown",a),n.body.appendChild(r)}(),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){!function(e){e.AnalyserNode&&(e.AnalyserNode.prototype.getFloatTimeDomainData||!function(){var t=new Uint8Array(32768);e.AnalyserNode.prototype.getFloatTimeDomainData=function(e){var n=Math.min(this.fftSize,e.length);this.getByteTimeDomainData(t);for(var a=0;a<n;a++)e[a]=.0078125*t[a]-1}}())}(window)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e=[],t=function(t){return e.push(t),function(){e.splice(e.indexOf(t),1)}},n=function(t,n){var a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value;l(t,n)}}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}};return[t,n]}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(6),u=(a(l),n(5)),c=a(u),d="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxnPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLDBDNS4zNzUsMCwwLjAwMyw1LjM3MywwLjAwMywxMmMwLDYuNjI3LDUuMzcyLDEyLDExLjk5NywxMiAgICBjNi42MjYsMCwxMS45OTctNS4zNzMsMTEuOTk3LTEyQzIzLjk5Nyw1LjM3MywxOC42MjYsMCwxMiwweiBNMTYuNDEyLDE2LjcwOWwtMC4zNSwwLjM1Yy0wLjI5MSwwLjI5MS0wLjc4MiwwLjMwNS0xLjA4OCwwLjAyOSAgICBsLTQuNTItMy45NTVjLTAuMzA4LTAuMjc1LTAuNTQxLTAuODM4LTAuNTIxLTEuMjVsMC40MTktNy4xMzRDMTAuMzc0LDQuMzM2LDEwLjcyOSw0LDExLjE0Miw0aDAuNDkzICAgIGMwLjQxMywwLDAuNzY3LDAuMzM2LDAuNzg3LDAuNzQ4bDAuMzQzLDUuOTM0YzAuMDIxLDAuNDEzLDAuMjYyLDEsMC41MzUsMS4zMDlsMy4xNDQsMy42MjggICAgQzE2LjcxNywxNS45MjgsMTYuNzA0LDE2LjQxOCwxNi40MTIsMTYuNzA5eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9nPjwvZz48L3N2Zz4=",p=function(){function e(t,n,a){var s=this;i(this,e);var l=4,u=[{outName:"gate16",divisor:1},{outName:"gate8",divisor:2},{outName:"gate4",divisor:4}];this.inputs={},this.outputs={};var p=!0,h=!1,f=void 0;try{for(var v,g=u[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var m=v.value,y=r(),b=o(y,2),w=b[0],x=b[1];this.outputs[m.outName]={type:"gateEvent",subscribe:w},m.emitter=x}}catch(e){h=!0,f=e}finally{try{!p&&g.return&&g.return()}finally{if(h)throw f}}this.tempo=120;var k=10;a&&(this.tempo=a.t);var L=t.createElement("div");L.innerHTML='<div style="box-sizing: border-box; width: 62px; height: 256px; padding: 5px; background-color: #a72a2a;font-size:14px"><div style="text-align:center;margin:40px 0 20px"><img width="48" height="48" src="'+d+'"></div><div><label>Tempo<br><input type="number" value="'+this.tempo+'" min="'+k+'" style="width: 50px" />bpm</label></div></div>',this.panelView=L.childNodes[0],this.panelView.querySelector("input").addEventListener("input",function(e){var t=parseInt(e.target.value,10);!isNaN(t)&&t>=k&&(s.tempo=t)},!1),this._scheduler=new c.default(n);var E=n.currentTime+.1,T=0;this._scheduler.start(function(e){for(var t=60/(s.tempo*l);E<e.end;){var n=!0,a=!1,i=void 0;try{for(var r,o=u[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var c=r.value,d=c.divisor,p=d*t;T%d===0&&(c.emitter(E,!0),c.emitter(E+.5*p,!1))}}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}E+=t,T++}})}return s(e,[{key:"deactivate",value:function(){this._scheduler.stop()}},{key:"save",value:function(){return{t:this.tempo}}}]),e}();t.default=p,p.blockName="Big Ben",p.helpText="Big Ben is a clock generator. It outputs gate signals at a steady tempo, which is useful for advancing sequencers or triggering repetitive sounds.\n\nThe panel input lets you specify a tempo in beats per minute (BPM).\n\nThere are three gate outputs that emit gates at different time divisions of the specified tempo: gate16 is 16th notes, gate8 is 8th notes, and gate4 is quarter notes."},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(7),o=function(){function e(t,n){var i=this;a(this,e);var o=510,s=256,l=1024,u=new Float32Array(l),c=n.createAnalyser();c.fftSize=l;var d=n.createBuffer(1,2,n.sampleRate),p=d.getChannelData(0);p[0]=0,p[1]=0;var h=n.createBufferSource();h.buffer=d,h.loop=!0,h.start(),h.connect(c),this.inputs={audio:{type:"audio",node:c}},this.outputs={audio:{type:"audio",node:c}};var f=t.createElement("div");f.innerHTML=r,this.panelView=f.childNodes[0];var v=this.panelView.querySelector("canvas"),g=v.getContext("2d"),m=function e(){c.getFloatTimeDomainData(u);for(var t=0,n=0;n<l-o;n++)if(u[n]<=0&&u[n+1]>0){t=n;break}g.fillStyle="rgb(0, 0, 0)",g.fillRect(0,0,o,s),g.lineWidth=1,g.strokeStyle="rgb(0, 255, 0)",g.beginPath();for(var a=0;a<o;a++){var r=.5*s*(1-u[a+t]);0===a?g.moveTo(a,r):g.lineTo(a,r)}g.stroke(),i.rafId=requestAnimationFrame(e)};m()}return i(e,[{key:"deactivate",value:function(){cancelAnimationFrame(this.rafId)}}]),e}();t.default=o,o.blockName="Scope",o.helpText='Scope is an audio waveform visualizer, similar to an oscilloscope.\n\nScope visualizes the audio signal connected to its input. Its output is a copy of of its input, so it can be placed "in line" in a signal chain. However its output needn\'t be connected for it to work.\n\nThe vertical range of scope is [-1, 1], and the horizontal range is 510 samples, or about 12 milliseconds at a 44.1kHz sample rate.\n\nIf possible, Scope will align the displayed waveform so that it crosses zero at the left edge of the display. This can make wave shapes easier to discern. But if the input signal does not have a recent zero-crossing, alignment is not possible.'},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),r=function e(t,n,r){a(this,e);var o=1,s=440,l=.1,u=!1,c=function(e,t){t&&!u&&(d.frequency.setValueAtTime(s,e),d.frequency.exponentialRampToValueAtTime(o,e+l)),u=t},d=n.createOscillator();d.type="sine",d.frequency.value=o,d.start(),this.inputs={gate:{type:"gateEvent",notify:c}},this.outputs={audio:{type:"audio",node:d}};var p=t.createElement("div");p.innerHTML='<div style="box-sizing: border-box; width: 126px; height: 256px; padding: 5px; background-color: #e8a35f;position:relative"><div style="text-align:center;position:absolute;width:116px;bottom:0px"><img width="100" height="100" src='+i+"></div></div>",this.panelView=p.childNodes[0]};t.default=r,r.blockName="Thumper",r.helpText="Thumper is a simple kick drum synthesizer.\n\nIt has one gate input to trigger the kick, and one audio output with the resulting sound.\n\nThumper doesn't yet have any panel controls."},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){a(this,e),this.audioContext=t,this.running=!1,this.timeoutID=null}return i(e,[{key:"start",value:function(e){var t=.05,n=.1,a=this,i=null,r=null,o=function o(){if(!a.running)throw new Error("Internal error: timeoutFunc called but scheduler not running");var s=a.audioContext.currentTime;null===i&&(i=s,r=s),r<s&&console.log("FELL BEHIND BY",s-r);var l=s+n;e({begin:r,end:l,relativeBegin:r-i,relativeEnd:l-i,start:i}),r=l,a.timeoutID=setTimeout(o,1e3*t)};this.running=!0,o()}},{key:"stop",value:function(){this.running=!1,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)}}]),e}();t.default=r},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function i(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],o(n))return!1;if(a(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(r(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!a(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,s;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||a(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],a(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){e.exports="<div style=box-sizing:border-box;width:510px;height:256px;background-color:#000> <canvas width=510 height=256></canvas> </div> "},function(e,t){e.exports="\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' x='0px' y='0px' viewBox='0 0 100 100' enable-background='new 0 0 100 100' xml:space='preserve'%3E%3Cpath d='M93.7,88l-5.3-30.6c0.6-2.2,1-4.5,1.2-6.8c0.2,0.1,0.4,0.2,0.7,0.2l0.4,0c0.6,0,1.1-0.5,1.1-1.1l0-5.7 c0-0.6-0.5-1.1-1.1-1.1l-0.4,0c-0.3,0-0.5,0.1-0.7,0.2c-0.8-8.3-4.1-15.8-9.1-21.8c0.2-0.1,0.3-0.1,0.5-0.3l0.3-0.3 c0.4-0.4,0.4-1.2,0-1.6l-4-4c-0.4-0.4-1.2-0.4-1.6,0l-0.3,0.3c-0.1,0.1-0.2,0.3-0.3,0.5c-6.8-5.5-15.5-8.9-24.9-8.9v0 c0,0-1.5,0-2.1,0.1c-8.8,0.4-16.7,3.6-23.1,8.8c-0.1-0.1-0.1-0.3-0.3-0.4l-0.3-0.3c-0.4-0.4-1.2-0.4-1.6,0l-4,4 c-0.4,0.4-0.4,1.2,0,1.6l0.3,0.3c0.1,0.1,0.2,0.2,0.3,0.2c-5.1,6-8.3,13.6-9.1,21.8c-0.2-0.1-0.4-0.2-0.6-0.2l-0.4,0 c-0.6,0-1.1,0.5-1.1,1.1l0,5.7c0,0.6,0.5,1.1,1.1,1.1l0.4,0c0.2,0,0.4-0.1,0.6-0.2c0.2,2.3,0.6,4.6,1.3,6.8L6.3,88 C5.5,88.2,5,88.7,5,89.5v1.9c0,0.8,0.7,1.5,1.5,1.5h1.5c0.8,0,1.5-0.7,1.5-1.5v-1.9c0-0.7-0.4-1.2-1-1.4L13.1,62 c1.4,3.6,3.4,6.8,5.7,9.8c-0.1,0.1-0.2,0.1-0.3,0.2l-0.3,0.3c-0.4,0.4-0.4,1.2,0,1.6l4,4c0.4,0.4,1.2,0.4,1.6,0l0.3-0.3 c0.1-0.1,0.1-0.2,0.2-0.2c7,5.9,15.9,9.4,25.7,9.4c0.6,0,1.3,0,1.9,0c0.9,0,1.9-0.1,2.8-0.2c0,0,0.1,0,0.1,0c8.5-1,16.1-4.6,22-10 c0.1,0.1,0.2,0.3,0.3,0.4l0.3,0.3c0.5,0.4,1.2,0.4,1.6-0.1l3.8-4.2c0.4-0.5,0.4-1.2-0.1-1.6l-0.3-0.3c-0.1-0.1-0.3-0.2-0.4-0.2 c2-2.7,3.7-5.6,4.9-8.8l4.6,26.2c-0.6,0.2-1,0.7-1,1.4v1.9c0,0.8,0.7,1.5,1.5,1.5h1.5c0.8,0,1.5-0.7,1.5-1.5v-1.9 C95,88.7,94.5,88.2,93.7,88z M49,83.3c-1,0-2.1-0.1-3.1-0.2v-8.6H49V83.3z M54.3,83.1c-0.8,0.1-1.7,0.2-2.6,0.2c-0.2,0-0.3,0-0.5,0 v-8.8h3V83.1z M56.6,82.7v-8.2c0-1.3-1-2.3-2.3-2.3h-3V53.6h0.5c1.9,0,3.4-1.5,3.4-3.4v-4.4c0-1.9-1.5-3.4-3.4-3.4h-3.5 c-1.9,0-3.4,1.5-3.4,3.4v4.4c0,1.9,1.5,3.4,3.4,3.4H49v18.6h-3.1c-1.3,0-2.3,1-2.3,2.3v8.2c-16.5-2.9-29.2-16.8-30-34.1 c-0.5-9.7,2.9-19,9.4-26.2c6.5-7.2,15.5-11.4,25.2-11.9c0.6,0,1.2,0,1.8,0c19.4,0,35.4,15.2,36.4,34.7 C87.3,63.6,74.2,79.5,56.6,82.7z'%3E%3C/path%3E%3C/svg%3E\""},function(e,t,n){"use strict";function a(){var e,t;return e=new i.uint16(1),e[0]=4660,t=new i.uint8(e.buffer),52===t[0]}var i=n(41);e.exports=a()},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(24),l=n(27),u=n(28),c=function(){function e(){a(this,e),this.value=1}return o(e,[{key:"set",value:function(e){this.value=e}},{key:"next",value:function(){return this.value++}}]),e}(),d=function(e,t){var n=function n(i,r,o){a(this,n),this.inputs={},this.outputs={};var s=i.createElement("div");s.innerHTML='<div style="box-sizing:border-box;width:62px;height:256px;text-align:center;font-size:14px;background:#ccc;color:black;padding:95px 5px"><img width="52" height="52" src='+(t?l:u)+"><br>"+(t?"IN":"OUT")+"</div>",this.panelView=s.firstChild;var c=t?e.inputs:e.outputs,d=t?this.outputs:this.inputs,p=function(e,t){if(c[e])throw new Error("port name already exists");switch(t){case"audio":var n=r.createGain();c[e]={type:"audio",node:n},d[e]={type:"audio",node:n};break;default:throw new Error("Unsupported rack port type")}};if(o)for(var h in o.p)p(h,o.p[h].t);else t||p("audio","audio");this.save=function(){var e={};for(var t in d)e[t]={t:d[t].type};return{p:e}}};return n.blockName=t?"Rack Inputs":"Rack Outputs",n.helpText=t?"Rack Inputs is a special block that lets you output audio from the rack.\n\nAny input signals provided to the rack can be accessed via the output ports of the Rack Inputs block.\n\nUnlike normal blocks, there can be only one Rack Inputs block in a rack, and it can't be deleted.":"Rack Outputs is a special block that lets you output signals from the rack. Currently, it only supports a single audio signal.\n\nConnect any audio signal to the Rack Outputs audio input, and that signal will be the final output of the rack.\n\nUnlike normal blocks, there can be only one Rack Outputs block in a rack, and it can't be deleted.",n};t.default=function(e){var t=function(){function t(n,o,l){a(this,t);var u="__ri",p="__ro",h="ro",f=Object.assign({},e);f[u]=d(this,!0),f[p]=d(this,!1),this.inputs={},this.outputs={};var v=n.createElement("div");v.innerHTML=s,this.windowView=v.childNodes[0];var g=null,m=null,y=null,b=null,w=!1,x=this.windowView.querySelector(".block-palette"),k=this.windowView.querySelector(".delete-wires-button"),L=this.windowView.querySelector(".block-container"),E=this.windowView.querySelector(".patch-input-select"),T=this.windowView.querySelector(".patch-output-select"),I=this.windowView.querySelector(".patch-connect-button"),S=this.windowView.querySelector(".patch-connection-list"),_=n.createElement("canvas");_.style.cssText="position:absolute;pointer-events:none",this.windowView.appendChild(_);var A=n.createElement("canvas");A.style.cssText="position:absolute;pointer-events:none",this.windowView.appendChild(A);var N="application/prs.plinth-block-class-id",C=function(t){var a=e[t],i=n.createElement("div");i.textContent=a.blockName,i.setAttribute("draggable",!0),i.setAttribute("title","Click for help"),i.style.cssText="padding:5px 10px;margin:6px 0;color:#222;background:#bbb;cursor:move;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab",x.appendChild(i),i.addEventListener("dragstart",function(e){e.dataTransfer.setData(N,t)},!1),function(){i.addEventListener("click",function(){H(a)})}(),i.addEventListener("mouseenter",function(e){e.target.style.background="#ddd"}),i.addEventListener("mouseleave",function(e){e.target.style.background="#bbb"})};for(var D in e)C(D);var M={},O={},P=new c,j=new c,R=!0,z=this.windowView.querySelector(".block-help-panel"),V=this.windowView.querySelector(".block-help-title"),B=this.windowView.querySelector(".block-help-body"),q=function(e){var t=n.createElement("div"),a=!0,i=!1,r=void 0;try{for(var o,s=e.split("\n")[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value,u=n.createElement("p");u.textContent=l,t.appendChild(u)}}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}return t},H=function(e){z.style.display="block",V.textContent=e.blockName,e.helpText?(B.innerHTML="",B.appendChild(q(e.helpText))):B.innerHTML="<em>No help text available</em>"},F=function(){z.style.display="none"};z.querySelector(".block-help-panel-close-button").addEventListener("click",function(){F()});var W=function(){i(S);var e=function(e){var t=O[e],a=M[t.outBlockId].displayName+":"+t.outPortName+" → "+M[t.inBlockId].displayName+":"+t.inPortName,i=n.createElement("li");i.appendChild(n.createTextNode(a+" "));var r=n.createElement("button");r.textContent="remove",r.addEventListener("click",function(){be(e)}),i.appendChild(r),S.appendChild(i)};for(var t in O)e(t)},X=function(e){var t=e.outBlockId,n=e.outPortName,a=e.inBlockId,i=e.inPortName,r=M[t].instance,o=M[a].instance;if(!r.outputs.hasOwnProperty(n))return!1;if(!o.inputs.hasOwnProperty(i))return!1;for(var s in O){var l=O[s];if(l.outBlockId===t&&l.outPortName===n&&l.inBlockId===a&&l.inPortName===i)return!1}return r.outputs[n].type===o.inputs[i].type},Y=function(){var e=E.value,t=T.value;if(!e||!t)return null;var n=e.split(":"),a=r(n,2),i=a[0],o=a[1],s=t.split(":"),l=r(s,2),u=l[0],c=l[1];return{inBlockId:i,inPortName:o,outBlockId:u,outPortName:c}},U=function(){var e=Y();I.disabled=!(e&&X(e))},G=function(){var e={},t={};for(var a in M){var r=M[a].instance,o=M[a].displayName;for(var s in r.inputs)e[a+":"+s]=o+":"+s;for(var l in r.outputs)t[a+":"+l]=o+":"+l}i(E);for(var u in e){var c=n.createElement("option");c.textContent=e[u]+" IN",c.value=u,E.appendChild(c)}i(T);for(var d in t){var c=n.createElement("option");c.textContent=t[d]+" OUT",c.value=d,T.appendChild(c)}U()},Z=function(e){var t=M[e].wrapperElem;if(t){var n=t.firstChild,a=t.lastChild;a.style.width=n.offsetWidth+"px",a.style.height=n.offsetHeight+"px"}},Q=function(){for(var e in M){var t=M[e].wrapperElem;t&&(R?(t.firstChild.style.display="block",t.lastChild.style.display="none"):(t.firstChild.style.display="none",t.lastChild.style.display="block"))}ee(),ne(),ie()},J=function(){if(R)for(var e in M)Z(e);R=!R,Q()},K=function(e,t){e.style.left=t.offsetLeft,e.style.top=t.offsetTop,e.style.width=t.offsetWidth,e.style.height=t.offsetHeight,e.width=t.offsetWidth,e.height=t.offsetHeight},$=function(e,t,n){var a=M[e].jackContainerElem.querySelector('.port-jack[data-inout="'+t+'"][data-portname="'+n+'"]');return{x:a.offsetLeft+("output"===t?a.offsetWidth-12:12)-L.scrollLeft,y:a.offsetTop+.5*a.offsetHeight-L.scrollTop}},ee=function(){var e=[];return R?_.style.display="none":!function(){_.style.display="block";var t=L;K(_,t);var n=_.getContext("2d"),a=_.width,i=_.height;n.clearRect(0,0,a,i),n.lineCap="round",n.globalAlpha=.5;var r=function(a){var i=O[a],r=$(i.outBlockId,"output",i.outPortName),o=$(i.inBlockId,"input",i.inPortName),s=function(){n.beginPath(),n.moveTo(r.x-t.offsetLeft,r.y-t.offsetTop),n.lineTo(o.x-t.offsetLeft,o.y-t.offsetTop),n.stroke()},l=!1;w&&(n.strokeStyle="rgba(0, 0, 0, 0)",n.lineWidth=20,s(),l=n.isPointInStroke(b.x-t.offsetLeft,b.y-t.offsetTop)),n.strokeStyle=l?"rgb(255, 0, 0)":"rgb(0, 255, 0)",n.lineWidth=6,s(),l&&e.push(a)};for(var o in O)r(o)}(),e},te=function(){if(y){if("input"===g.dataset.inout){if("input"===y.dataset.inout)return null;if("output"===y.dataset.inout)return{outBlockId:y.dataset.blockid,outPortName:y.dataset.portname,inBlockId:g.dataset.blockid,inPortName:g.dataset.portname};throw new Error("internal error")}if("output"===g.dataset.inout){if("input"===y.dataset.inout)return{outBlockId:g.dataset.blockid,outPortName:g.dataset.portname,inBlockId:y.dataset.blockid,inPortName:y.dataset.portname};if("output"===y.dataset.inout)return null;throw new Error("internal error")}throw new Error("internal error")}return null},ne=function(){if(R||!g)A.style.display="none";else{A.style.display="block";var e=$(g.dataset.blockid,g.dataset.inout,g.dataset.portname),t=te(),n=t&&X(t),a=L;K(A,a);var i=A.getContext("2d"),r=A.width,o=A.height;i.clearRect(0,0,r,o),i.lineWidth=6,i.lineCap="round",i.strokeStyle=n?"rgb(0, 255, 0)":"rgb(255,105,180)",i.globalAlpha=.75,i.beginPath(),i.moveTo(e.x-a.offsetLeft,e.y-a.offsetTop),i.lineTo(m.x-a.offsetLeft,m.y-a.offsetTop),i.stroke()}},ae=function(e){var t=M[e].displayName,n={};for(var a in M)a!==e&&(n[M[a].displayName]=null);if(n.hasOwnProperty(t))for(var i=2;;i++){var r=t+" "+i;if(!n.hasOwnProperty(r))return void(M[e].displayName=r)}},ie=function(){k.style.color=R?"rgb(92, 104, 97)":"#9aada2",k.style.cursor=R?"default":"pointer",k.style.backgroundColor=!R&&w?"rgb(170,0,0)":"transparent",k.disabled=R},re=function(){w?(w=!1,ee()):(g=null,m=null,w=!0,y&&(y.style.backgroundColor=de,y.style.cursor="default"),ee(),ne()),ie()},oe=function(){if(!g)throw new Error("internal error");if(y){var e=te();e&&X(e)&&ye(e)}g=null,m=null},se=function(e){if(!w){e.preventDefault();var t=e.currentTarget;g?oe():(g=t,m={x:e.pageX,y:e.pageY}),ne()}},le=function(e){if(w){var t=ee();if(t.length>0){e.preventDefault();var n=!0,a=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;be(s)}}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}}}};n.addEventListener("mousedown",le,!1);var ue=function(e){g&&(e.preventDefault(),y===g||(oe(),ne()))};n.addEventListener("mouseup",ue,!1);var ce=function(e){b={x:e.pageX,y:e.pageY},!R&&w&&ee(),g&&(m={x:e.pageX,y:e.pageY},ne())};n.addEventListener("mousemove",ce,!1);var de="#bbb",pe="#eee",he=function(e){var t=e.currentTarget;w||(t.style.backgroundColor=pe,t.style.cursor="pointer"),y=t},fe=function(e){var t=e.currentTarget;t.style.backgroundColor=de,t.style.cursor="default",y=null},ve=function(e,t,a,i){var r=n.createElement("div");r.style.cssText="color:black;font-size:12px;display:inline-block;box-sizing:border-box;border:1px solid #555;margin:2px 0;padding:3px 6px;border-radius:2px;word-break:break-word;cursor:pointer;user-select:none",r.style.backgroundColor=de,r.dataset.blockid=e,r.dataset.inout=t,r.dataset.portname=a,r.className="port-jack",r.addEventListener("mousedown",se,!1),r.addEventListener("mouseenter",he,!1),r.addEventListener("mouseleave",fe,!1),r.textContent="input"===t?"▷ "+a:a+" ►";var o=n.createElement("div");return i&&(o.style.textAlign="right"),o.appendChild(r),o},ge=function(e,t,a,i){var r=f[e],s=new r(n,o,t),l=a||"b"+P.next();M[l]={id:l,blockClassId:e,instance:s,displayName:i||r.blockName,wrapperElem:void 0,jackContainerElem:void 0},ae(l);var u=void 0;if(s.panelView)u=s.panelView;else{var c=62,d=256,p=n.createElement("div");p.innerHTML='<div style="box-sizing:border-box;width:'+c+"px;height:"+d+'px;text-align:center;font-size:14px;background:white;font-style:italic;color:gray;padding:100px 5px">No panel view</div>',u=p.firstChild}var h=n.createElement("div");h.style.cssText="margin: 1px",h.setAttribute("data-blockid",l),h.appendChild(u),L.appendChild(h),M[l].wrapperElem=h;var v=n.createElement("a");v.style.cssText="float:right;color: #ccc;text-decoration: none;margin-right:3px",v.href="#",v.textContent="?",v.addEventListener("click",function(e){e.preventDefault(),H(r)});var g=n.createElement("a");g.style.cssText="float:right;color: #ccc;text-decoration: none",g.href="#",g.textContent="X",g.addEventListener("click",function(e){e.preventDefault(),me(l)});var m=n.createElement("div");m.style.cssText="background-color: #555; font-size: 12px; padding: 4px 6px; color: #ccc",e.startsWith("__")||m.appendChild(g),m.appendChild(v),m.appendChild(n.createTextNode(M[l].displayName));var y=n.createElement("div");y.style.cssText="padding: 5px",M[l].jackContainerElem=y;var b=n.createElement("div");b.style.cssText="background-color:#ddd",b.appendChild(m),b.appendChild(y),h.appendChild(b);for(var w in s.inputs)y.appendChild(ve(l,"input",w));for(var x in s.outputs)y.appendChild(ve(l,"output",x,!0));Z(l),Q(),G()},me=function(e){var t=[];for(var n in O){var a=O[n];a.outBlockId!==e&&a.inBlockId!==e||t.push(n)}var i=!0,r=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;be(u)}}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}L.removeChild(M[e].wrapperElem);var c=M[e].instance;c.deactivate&&c.deactivate(),delete M[e],G()},ye=function(e){var t=e.outBlockId,n=e.outPortName,a=e.inBlockId,i=e.inPortName,r="c"+j.next(),o={outBlockId:t,outPortName:n,inBlockId:a,inPortName:i,disconnect:void 0};O[r]=o;var s=M[t].instance,l=M[a].instance;!function(){switch(s.outputs[n].type){case"audio":var e=s.outputs[n].node,t=l.inputs[i].node;e.connect(t),o.disconnect=function(){e.disconnect(t)};break;case"gateEvent":o.disconnect=s.outputs[n].subscribe(l.inputs[i].notify);break;default:throw new Error("Invalid port type")}}(),W(),U(),ee()},be=function(e){var t=O[e];t.disconnect(),delete O[e],W(),U(),ee()};E.addEventListener("input",function(){U()}),T.addEventListener("input",function(){U()}),I.addEventListener("click",function(e){e.preventDefault();var t=Y();if(t)return X(t)?void ye(t):void console.log("invalid")});var we=function(e){return e.types.indexOf(N)>=0?e.getData(N):null};if(L.addEventListener("dragover",function(e){we&&(e.dataTransfer.dropEffect="copy"),e.preventDefault(),e.stopPropagation()},!1),L.addEventListener("drop",function(e){var t=we(e.dataTransfer);t&&ge(t),e.preventDefault(),e.stopPropagation()},!1),l){var xe=!0,ke=!1,Le=void 0;try{for(var Ee,Te=l.bo[Symbol.iterator]();!(xe=(Ee=Te.next()).done);xe=!0){var Ie=Ee.value,Se=l.bm[Ie];ge(Se.b,Se.s,Ie,Se.n)}}catch(e){ke=!0,Le=e}finally{try{!xe&&Te.return&&Te.return()}finally{if(ke)throw Le}}var _e=[],Ae=!0,Ne=!1,Ce=void 0;try{for(var De,Me=l.bo[Symbol.iterator]();!(Ae=(De=Me.next()).done);Ae=!0){var Oe=De.value;"b"===Oe[0]&&_e.push(+Oe.slice(1))}}catch(e){Ne=!0,Ce=e}finally{try{!Ae&&Me.return&&Me.return()}finally{if(Ne)throw Ce}}P.set(Math.max(_e)+1);var Pe=!0,je=!1,Re=void 0;try{for(var ze,Ve=l.c[Symbol.iterator]();!(Pe=(ze=Ve.next()).done);Pe=!0){var Be=ze.value;ye({outBlockId:Be.ob,outPortName:Be.op,inBlockId:Be.ib,inPortName:Be.ip})}}catch(e){je=!0,Re=e}finally{try{!Pe&&Ve.return&&Ve.return()}finally{if(je)throw Re}}}else ge(p,null,h,"Rack Outputs");var qe=function(e){e.target!==n.body&&e.target!=n.documentElement||(" "===e.key?(J(),e.preventDefault()):"d"===e.key&&(R||(re(),e.preventDefault())))};n.addEventListener("keydown",qe),this.windowView.querySelector(".toggle-front-back-button").addEventListener("click",function(){J()}),k.addEventListener("click",function(){re()}),L.addEventListener("scroll",function(){ee(),ne()});var He=function(){ee(),ne()};window.addEventListener("resize",He),U(),G(),ee(),this.deactivate=function(){var e=[];for(var t in M)e.push(t);var a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value;me(l)}}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}n.removeEventListener("keydown",qe),n.removeEventListener("mousedown",le,!1),n.removeEventListener("mouseup",ue,!1),n.removeEventListener("mousemove",ce,!1),window.removeEventListener("resize",He)},this.blockInfo=M,this.blockContainerElem=L,this.cxnInfo=O,this.removeBlock=me}return o(t,[{key:"save",
value:function(){var e={};for(var t in this.blockInfo){var n=this.blockInfo[t];e[t]={b:n.blockClassId,s:n.instance.save?n.instance.save():null,n:n.displayName}}var a=[],i=!0,r=!1,o=void 0;try{for(var s,l=this.blockContainerElem.childNodes[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,c=u.dataset.blockid;if(!c||!e[c])throw new Error("internal error");a.push(u.dataset.blockid)}}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}var d=[];for(var p in this.cxnInfo){var h=this.cxnInfo[p];d.push({ob:h.outBlockId,op:h.outPortName,ib:h.inBlockId,ip:h.inPortName})}return{bm:e,bo:a,c:d}}}]),t}();return t.blockName="Racket",t}},function(e,t){!function(e){function t(t){t=t||{},h=navigator.userAgent.match(/OS [1-4](?:_\d+)+ like Mac/)?"page":"client";var r=e.createElement("div"),o="draggable"in r,s="ondragstart"in r&&"ondrop"in r,l=!(o||s)||/iPad|iPhone|iPod|Android/.test(navigator.userAgent);c((l?"":"not ")+"patching html5 drag drop"),l&&(t.enableEnterLeave||(n.prototype.synthesizeEnterLeave=p),t.holdToDrag?e.addEventListener("touchstart",a(t.holdToDrag)):e.addEventListener("touchstart",i))}function n(e,t){this.dragData={},this.dragDataTypes=[],this.dragImage=null,this.dragImageTransform=null,this.dragImageWebKitTransform=null,this.customDragImage=null,this.customDragImageX=null,this.customDragImageY=null,this.el=t||e.target,c("dragstart"),this.dispatchDragStart()&&(this.createDragImage(),this.listen())}function a(e){return function(t){var n=t.target;if(n.draggable===!0)var a=function(){l.off(),u.off(),c.off(),i(t)},r=function(){l.off(),u.off(),c.off(),clearTimeout(o)},o=setTimeout(a,e),l=s(n,"touchend",r,this),u=s(n,"touchcancel",r,this),c=s(window,"scroll",r,this)}}function i(t){var a=t.target;do if(a.draggable===!0){if(!a.hasAttribute("draggable")&&"a"==a.tagName.toLowerCase()){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,a.ownerDocument.defaultView,1,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),a.dispatchEvent(i),c("Simulating click to anchor")}t.preventDefault(),new n(t,a);break}while((a=a.parentNode)&&a!==e.body)}function r(t,n){var a=n.changedTouches[0],i=e.elementFromPoint(a[h+"X"],a[h+"Y"]);return i}function o(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}}function s(e,t,n,a){return a&&(n=n.bind(a)),e.addEventListener(t,n),{off:function(){return e.removeEventListener(t,n)}}}function l(e,t,n,a){function i(a){return n(a),e.removeEventListener(t,i)}return a&&(n=n.bind(a)),e.addEventListener(t,i)}function u(e,t){if(1==e.nodeType){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),t.removeAttribute("draggable");for(var n=window.getComputedStyle(e),a=0;a<n.length;a++){var i=n[a];t.style.setProperty(i,n.getPropertyValue(i),n.getPropertyPriority(i))}t.style.pointerEvents="none"}if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++)u(e.childNodes[r],t.childNodes[r])}function c(e){console.log(e)}function d(e){return 0===e.length?0:e.reduce(function(e,t){return t+e},0)/e.length}function p(){}c=p;var h;n.prototype={listen:function(){function t(e){this.dragend(e,e.target),n.call(this)}function n(){return c("cleanup"),this.dragDataTypes=[],null!==this.dragImage&&(this.dragImage.parentNode.removeChild(this.dragImage),this.dragImage=null,this.dragImageTransform=null,this.dragImageWebKitTransform=null),this.customDragImage=null,this.customDragImageX=null,this.customDragImageY=null,this.el=this.dragData=null,[a,i,r].forEach(function(e){return e.off()})}var a=s(e,"touchmove",this.move,this),i=s(e,"touchend",t,this),r=s(e,"touchcancel",n,this)},move:function(e){e.preventDefault();var t=[],n=[];[].forEach.call(e.changedTouches,function(e){t.push(e.pageX),n.push(e.pageY)});var a=d(t)-(this.customDragImageX||parseInt(this.dragImage.offsetWidth,10)/2),i=d(n)-(this.customDragImageY||parseInt(this.dragImage.offsetHeight,10)/2);this.translateDragImage(a,i),this.synthesizeEnterLeave(e)},translateDragImage:function(e,t){var n="translate("+e+"px,"+t+"px) ";null!==this.dragImageWebKitTransform&&(this.dragImage.style["-webkit-transform"]=n+this.dragImageWebKitTransform),null!==this.dragImageTransform&&(this.dragImage.style.transform=n+this.dragImageTransform)},synthesizeEnterLeave:function(e){var t=r(this.el,e);t!=this.lastEnter&&(this.lastEnter&&this.dispatchLeave(e),this.lastEnter=t,this.lastEnter&&this.dispatchEnter(e)),this.lastEnter&&this.dispatchOver(e)},dragend:function(t){c("dragend"),this.lastEnter&&this.dispatchLeave(t);var n=r(this.el,t);n?(c("found drop target "+n.tagName),this.dispatchDrop(n,t)):c("no drop target");var a=e.createEvent("Event");a.initEvent("dragend",!0,!0),this.el.dispatchEvent(a)},dispatchDrop:function(t,n){var a=e.createEvent("Event");a.initEvent("drop",!0,!0);var i=n.changedTouches[0],r=i[h+"X"],s=i[h+"Y"],u=o(t);a.offsetX=r-u.x,a.offsetY=s-u.y,a.dataTransfer={types:this.dragDataTypes,getData:function(e){return this.dragData[e]}.bind(this),dropEffect:"move"},a.preventDefault=function(){}.bind(this),l(e,"drop",function(){c("drop event not canceled")},this),t.dispatchEvent(a)},dispatchEnter:function(t){var n=e.createEvent("Event");n.initEvent("dragenter",!0,!0),n.dataTransfer={types:this.dragDataTypes,getData:function(e){return this.dragData[e]}.bind(this)};var a=t.changedTouches[0];n.pageX=a.pageX,n.pageY=a.pageY,n.clientX=a.clientX,n.clientY=a.clientY,this.lastEnter.dispatchEvent(n)},dispatchOver:function(t){var n=e.createEvent("Event");n.initEvent("dragover",!0,!0),n.dataTransfer={types:this.dragDataTypes,getData:function(e){return this.dragData[e]}.bind(this)};var a=t.changedTouches[0];n.pageX=a.pageX,n.pageY=a.pageY,n.clientX=a.clientX,n.clientY=a.clientY,this.lastEnter.dispatchEvent(n)},dispatchLeave:function(t){var n=e.createEvent("Event");n.initEvent("dragleave",!0,!0),n.dataTransfer={types:this.dragDataTypes,getData:function(e){return this.dragData[e]}.bind(this)};var a=t.changedTouches[0];n.pageX=a.pageX,n.pageY=a.pageY,n.clientX=a.clientX,n.clientY=a.clientY,this.lastEnter.dispatchEvent(n),this.lastEnter=null},dispatchDragStart:function(){var t=e.createEvent("Event");return t.initEvent("dragstart",!0,!0),t.dataTransfer={setData:function(e,t){return this.dragData[e]=t,this.dragDataTypes.indexOf(e)==-1&&(this.dragDataTypes[this.dragDataTypes.length]=e),t}.bind(this),setDragImage:function(e,t,n){this.customDragImage=e,this.customDragImageX=t,this.customDragImageY=n}.bind(this),dropEffect:"move"},this.el.dispatchEvent(t)},createDragImage:function(){this.customDragImage?(this.dragImage=this.customDragImage.cloneNode(!0),u(this.customDragImage,this.dragImage)):(this.dragImage=this.el.cloneNode(!0),u(this.el,this.dragImage)),this.dragImage.style.opacity="0.5",this.dragImage.style.position="absolute",this.dragImage.style.left="0px",this.dragImage.style.top="0px",this.dragImage.style.zIndex="999999";var t=this.dragImage.style.transform;"undefined"!=typeof t&&(this.dragImageTransform="","none"!=t&&(this.dragImageTransform=t.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,"")));var n=this.dragImage.style["-webkit-transform"];"undefined"!=typeof n&&(this.dragImageWebKitTransform="","none"!=n&&(this.dragImageWebKitTransform=n.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""))),this.translateDragImage(-9999,-9999),e.body.appendChild(this.dragImage)}},t(window.iosDragDropShim)}(document)},function(e,t,n){var a,i=i||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},a=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in a,r=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u="application/octet-stream",c=4e4,d=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,c)},p=function(e,t,n){t=[].concat(t);for(var a=t.length;a--;){var i=e["on"+t[a]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){l(e)}}},h=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},f=function(t,l,c){c||(t=h(t));var f,v=this,g=t.type,m=g===u,y=function(){p(v,"writestart progress write writeend".split(" "))},b=function(){if((s||m&&o)&&e.FileReader){var a=new FileReader;return a.onloadend=function(){var t=s?a.result:a.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank");n||(e.location.href=t),t=void 0,v.readyState=v.DONE,y()},a.readAsDataURL(t),void(v.readyState=v.INIT)}if(f||(f=n().createObjectURL(t)),m)e.location.href=f;else{var i=e.open(f,"_blank");i||(e.location.href=f)}v.readyState=v.DONE,y(),d(f)};return v.readyState=v.INIT,i?(f=n().createObjectURL(t),void setTimeout(function(){a.href=f,a.download=l,r(a),y(),d(f),v.readyState=v.DONE})):void b()},v=f.prototype,g=function(e,t,n){return new f(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=h(e)),navigator.msSaveOrOpenBlob(e,t)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof e&&e.exports?e.exports.saveAs=i:null!==n(29)&&null!==n(30)&&(a=function(){return i}.call(t,n,t,e),!(void 0!==a&&(e.exports=a)))},function(e,t,n){var a,i=function(){function e(e,t){if(!i[e]){i[e]={};for(var n=0;n<e.length;n++)i[e][e.charAt(n)]=n}return i[e][t]}var t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={},r={compressToBase64:function(e){if(null==e)return"";var t=r._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:r._decompress(t.length,32,function(a){return e(n,t.charAt(a))})},compressToUTF16:function(e){return null==e?"":r._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:r._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=r.compress(e),n=new Uint8Array(2*t.length),a=0,i=t.length;a<i;a++){var o=t.charCodeAt(a);n[2*a]=o>>>8,n[2*a+1]=o%256}return n},decompressFromUint8Array:function(e){if(null===e||void 0===e)return r.decompress(e);for(var n=new Array(e.length/2),a=0,i=n.length;a<i;a++)n[a]=256*e[2*a]+e[2*a+1];var o=[];return n.forEach(function(e){o.push(t(e))}),r.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":r._compress(e,6,function(e){return a.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),r._decompress(t.length,32,function(n){return e(a,t.charAt(n))}))},compress:function(e){return r._compress(e,16,function(e){return t(e)})},_compress:function(e,t,n){if(null==e)return"";var a,i,r,o={},s={},l="",u="",c="",d=2,p=3,h=2,f=[],v=0,g=0;for(r=0;r<e.length;r+=1)if(l=e.charAt(r),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=p++,s[l]=!0),u=c+l,Object.prototype.hasOwnProperty.call(o,u))c=u;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(a=0;a<h;a++)v<<=1,g==t-1?(g=0,f.push(n(v)),v=0):g++;for(i=c.charCodeAt(0),a=0;a<8;a++)v=v<<1|1&i,g==t-1?(g=0,f.push(n(v)),v=0):g++,i>>=1}else{for(i=1,a=0;a<h;a++)v=v<<1|i,g==t-1?(g=0,f.push(n(v)),v=0):g++,i=0;for(i=c.charCodeAt(0),a=0;a<16;a++)v=v<<1|1&i,g==t-1?(g=0,f.push(n(v)),v=0):g++,i>>=1}d--,0==d&&(d=Math.pow(2,h),h++),delete s[c]}else for(i=o[c],a=0;a<h;a++)v=v<<1|1&i,g==t-1?(g=0,f.push(n(v)),v=0):g++,i>>=1;d--,0==d&&(d=Math.pow(2,h),h++),o[u]=p++,c=String(l)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(a=0;a<h;a++)v<<=1,g==t-1?(g=0,f.push(n(v)),v=0):g++;for(i=c.charCodeAt(0),a=0;a<8;a++)v=v<<1|1&i,g==t-1?(g=0,f.push(n(v)),v=0):g++,i>>=1}else{for(i=1,a=0;a<h;a++)v=v<<1|i,g==t-1?(g=0,f.push(n(v)),v=0):g++,i=0;for(i=c.charCodeAt(0),a=0;a<16;a++)v=v<<1|1&i,g==t-1?(g=0,f.push(n(v)),v=0):g++,i>>=1}d--,0==d&&(d=Math.pow(2,h),h++),delete s[c]}else for(i=o[c],a=0;a<h;a++)v=v<<1|1&i,g==t-1?(g=0,f.push(n(v)),v=0):g++,i>>=1;d--,0==d&&(d=Math.pow(2,h),h++)}for(i=2,a=0;a<h;a++)v=v<<1|1&i,g==t-1?(g=0,f.push(n(v)),v=0):g++,i>>=1;for(;;){if(v<<=1,g==t-1){f.push(n(v));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:r._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,n,a){var i,r,o,s,l,u,c,d,p=[],h=4,f=4,v=3,g="",m=[],y={val:a(0),position:n,index:1};for(r=0;r<3;r+=1)p[r]=r;for(s=0,u=Math.pow(2,2),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=a(y.index++)),s|=(l>0?1:0)*c,c<<=1;switch(i=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=a(y.index++)),s|=(l>0?1:0)*c,c<<=1;d=t(s);break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=a(y.index++)),s|=(l>0?1:0)*c,c<<=1;d=t(s);break;case 2:return""}for(p[3]=d,o=d,m.push(d);;){if(y.index>e)return"";for(s=0,u=Math.pow(2,v),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=a(y.index++)),s|=(l>0?1:0)*c,c<<=1;switch(d=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=a(y.index++)),s|=(l>0?1:0)*c,c<<=1;p[f++]=t(s),d=f-1,h--;break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=a(y.index++)),s|=(l>0?1:0)*c,c<<=1;p[f++]=t(s),d=f-1,h--;break;case 2:return m.join("")}if(0==h&&(h=Math.pow(2,v),v++),p[d])g=p[d];else{if(d!==f)return null;g=o+o.charAt(0)}m.push(g),p[f++]=o+g.charAt(0),h--,o=g,0==h&&(h=Math.pow(2,v),v++)}}};return r}();a=function(){return i}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))},function(e,t,n){function a(e){return n(i(e))}function i(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./bigben/block.js":2,"./convolux/block.js":15,"./egen/block.js":16,"./gainer/block.js":17,"./orinami/block.js":18,"./remark/block.js":19,"./scope/block.js":3,"./thumper/block.js":4,"./waverly/block.js":20};a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=14},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),r=n(21),o=function e(t,n,o){a(this,e);var s=n.createGain();s.gain.value=1;var l=n.createConvolver();l.normalize=!0;var u=n.createGain(),c=n.createGain(),d=n.createGain();d.gain.value=1,s.connect(l),s.connect(u),l.connect(c),u.connect(d),c.connect(d);var p=[],h=null,f=void 0,v=void 0,g=function(){v||null===h?(u.gain.value=1,c.gain.value=0):(u.gain.value=Math.sqrt(1-f),c.gain.value=Math.sqrt(f))},m=function(e){if(f=e,f<0&&f>1)throw new Error("internal error");g(),T.value=e},y=function(e){if(v=e,"boolean"!=typeof v)throw new Error("internal error");g()},b=function(e){if(null===e)h=e,l.buffer=null;else{var t=p[e].responseBuffer;t?(h=e,l.buffer=t):console.warn("Warning: Can't switch to response, buffer is missing")}L.value=h,A(),g()},w=function(e,t,a){var i={name:e,responseBuffer:null,responseFileData:t},r=p.length;p.push(i),E(),n.decodeAudioData(t,function(e){i.responseBuffer=e,E(),a&&b(r)},function(){console.warn("Failed to decode audio file")})},x=function(){p.splice(h,1),b(0===p.length?null:h-1),E()};this.inputs={audio:{type:"audio",node:s}},this.outputs={audio:{type:"audio",node:d}};var k=t.createElement("div");k.innerHTML=r,this.panelView=k.childNodes[0];var L=this.panelView.querySelector(".response-select"),E=function(){L.innerHTML="";for(var e=0;e<p.length;e++){var n=p[e],a=t.createElement("option");a.textContent=n.name,a.value=e,n.responseBuffer||(a.disabled=!0),L.appendChild(a)}L.value=h};L.addEventListener("input",function(){b(+L.value)});var T=this.panelView.querySelector(".dry-wet");T.addEventListener("input",function(){m(+T.value)});var I=this.panelView.querySelector(".active-response-name"),S=this.panelView.querySelector(".active-response-duration"),_=this.panelView.querySelector(".active-response-delete"),A=function(){null===h?(I.textContent="",S.textContent="",_.style.visibility="hidden"):(I.textContent=p[h].name,S.textContent=p[h].responseBuffer.duration.toFixed(3)+"s",_.style.visibility="visible")};_.addEventListener("click",function(){x()});var N=this.panelView,C=function(e){if(e.types.indexOf("Files")>=0){var t=e.files,n=t[0];if(n.type.startsWith("audio/"))return n}return null};N.addEventListener("dragover",function(e){C(e.dataTransfer)&&(e.dataTransfer.dropEffect="copy",e.preventDefault(),e.stopPropagation())},!1),N.addEventListener("drop",function(e){var t=C(e.dataTransfer);t&&!function(){e.preventDefault(),e.stopPropagation();var n=new FileReader;n.onload=function(){w(t.name,n.result,!0)},n.readAsArrayBuffer(t)}()},!1),o||(o={responses:[],activeResponseIdx:null,bypass:!1,wetness:.5});for(var D=0;D<o.responses.length;D++)w(o.responses[D].name,(0,i.decode)(o.responses[D].responseFileData),D===o.activeResponseIdx);E(),null===h&&b(null),m(o.wetness),y(o.bypass),this.save=function(){return{responses:p.map(function(e){return{name:e.name,responseFileData:(0,i.encode)(e.responseFileData)}}),activeResponseIdx:h,bypass:v,wetness:f}}};t.default=o,o.blockName="Convolux",o.helpText='Convolux is an audio convolver, typically used for applying reverb.\n\nA special audio sample called an "impulse response" is used to capture the sound of a space. An impulse response sounds like a single loud click or clap recorded in a reverberating space. Using that impulse response, the same reverberation can be applied to any audio you want using a process called "convolution".\n\nTo load an impulse repsonse into Convolux, drag and drop the audio file onto the Convolux panel. Multiple responses can be added, and switched betweeb using the dropdown menu. The Dry↔Wet slider sets the mix between between the original "dry" input sound and the "wet" convolved sound in the output.\n\nMany impulse responses can be found for free on the internet. Also, percussive samples such as cymbals, snares, and claps can be used as impulse responses to get unusual reverb-type sounds.'},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),r=n(34),o=function e(t,n,o){a(this,e);var s=n.createBuffer(1,2,n.sampleRate),l=s.getChannelData(0);l[0]=1,l[1]=1;var u=n.createBufferSource();u.buffer=s,u.loop=!0,u.start();var c=n.createGain();c.gain.value=0,u.connect(c);var d=new r(n,c.gain);d.attackShape=d.LINEAR,o||(o={m:"AD",rt:.01,ft:.1,fs:r.EXPONENTIAL}),d.mode=o.m,d.attackRate=1/o.rt,d.decayShape=o.fs,d.decayRate=1/o.ft,d.releaseShape=o.fs,d.releaseRate=1/o.ft;var p=function(e,t){d.gate(t,e)};this.inputs={gate:{type:"gateEvent",notify:p}},this.outputs={audio:{type:"audio",node:c}};var h=t.createElement("div");h.innerHTML=i,this.panelView=h.childNodes[0];var f=this.panelView.querySelector(".mode-select");f.value=d.mode,f.addEventListener("input",function(){d.mode=f.value});var v=.001,g=30,m=Math.log(v),y=Math.log(g),b=function(e){return(Math.log(e)-m)/(y-m)},w=function(e){return Math.exp(m+e*(y-m))},x=this.panelView.querySelector(".rise-time-input");x.value=b(1/d.attackRate),x.addEventListener("input",function(){d.attackRate=1/w(x.value)});var k=this.panelView.querySelector(".fall-time-input");k.value=b(1/d.decayRate),k.addEventListener("input",function(){d.decayRate=1/w(k.value),d.releaseRate=1/w(k.value)});var L=this.panelView.querySelector(".fall-shape-select");L.value=d.decayShape,L.addEventListener("input",function(){d.decayShape=L.value,d.releaseShape=L.value}),this.save=function(){return{m:d.mode,rt:1/d.attackRate,ft:1/d.decayRate,fs:1/d.decayShape}}};t.default=o,o.blockName="Egen",o.helpText='Egen is a multi-mode envelope generator.\n\nEgen has a single gate-type input and a single audio-type output. Generally speaking, as the input gate signal turns on and off, the output value makes gradual transitions back and forth between 0 and 1.\n\nEgen has two modes: attack-decay (/\\ shape) and attack-sustain-release (/‾\\ shape).\n\nIn attack-decay mode, as soon as the output value reaches 1 (end of attack phase), it immediately starts transitioning back to 0 (decay phase). Even if the gate goes off during the attack phase, the attack phase will continue uninterrupted. This means that it only matters when the input gate goes on, not when it goes off. Attack-decay mode is sometimes referred to as "trigger" mode, and is useful for generating percussive sounds that always have the same envelope shape regardless of how long the gate is held high.\n\nIn attack-sustain-release mode, the output value starts moving towards 1 when the gate goes on (attack phase). If it reaches 1 while the gate is still on, it stays at 1 (sustain phase). When the gate goes off, the output value starts moving towards 0 (release phase). If the gate goes off during attack phase, the envelope will immediately enter release phase and decay towards 0.\n\nFor all envelope types, if the gate goes high during the falling phase (decay or release), a new attack will begin from the current output value. In other words, the envelope will restart WITHOUT dropping to 0 and the output will not have any sudden jumps.\n\nThe Rise control sets the speed of the attack phase, i.e. how quickly the envelope transitions towards 1. The attack shape is always linear.\n\nThe Fall control sets the speed of the decay and release phases, i.e. how quickly the envelope transitions towards 0. The Fall Shape control can be set to LIN (fall linearly to 0) or EXP (decay exponentially to 0). Exponential decay tends to sound more like natural sounds.\n\nTip: Very fast envelopes that rise and fall in less than the time of a single audio wave cycle can be used to make "click" sounds.'},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(23),r=function e(t,n,r){a(this,e);var o=n.createGain();o.gain.value=0,this.inputs={audio:{type:"audio",node:o},gain:{type:"audio",node:o.gain}},this.outputs={audio:{type:"audio",node:o}};var s=t.createElement("div");s.innerHTML=i,this.panelView=s.childNodes[0]};t.default=r,r.blockName="Gainer",r.helpText='Gainer is what\'s typically called a VCA (voltage controlled amplifier). It allows one audio-type signal to adjust the amplitude of another.\n\nGainer has two audio inputs, and one audio output. The output value at any instant is simply the two input values multiplied together. One input is named "audio" and one is named "gain" because typically one input is fed a listenable audio signal, while the other "gain" input is fed the output of an slower-varying envelope generator or LFO. That being said, the two inputs are completely symmetric. If fed two audio-rate input signals, Gainer will act as a ring modulator.\n\nGainer has no panel controls.'},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,n,i){var r=this;a(this,e);var o=0,s=4,l=void 0,u=n.createGain();u.gain.value=1;var c=n.createWaveShaper();c.oversample="none",u.connect(c);var d=function(e){for(var t=2*(e+1),n=new Float32Array(t),a=0;a<t;a++)n[a]=(e+a)%2?1:-1;c.curve=n,l=1/(t-1),r.stages=e};d(i?i.st:s),this.inputs={audio:{type:"audio",node:u}},this.outputs={audio:{type:"audio",node:c}};var p=t.createElement("div");p.innerHTML='<div style="box-sizing: border-box; width: 126px; height: 256px; padding: 5px; background-color: white;"><div>Orinami</div><div><label>Stages <input type="number" value="'+this.stages+'" min="'+o+'" step="1" style="width: 50px" /></label></div></div>',this.panelView=p.childNodes[0],this.panelView.querySelector("input").addEventListener("input",function(e){var t=parseInt(e.target.value,10);if(!isNaN(t)){var n=Math.floor(t);n>=o&&d(n)}},!1)}return i(e,[{key:"save",value:function(){return{st:this.stages}}}]),e}();t.default=r,r.blockName="Orinami",r.helpText='Orinami (折り波) is a wavefolder. It stretches and folds input waveforms in the amplitude dimension, introducing extremely non-linear distortion.\n\nOrinami first increases the amplitude of its input audio, and then any parts of the resulting waveform that exceed certain limits (the range -1 to 1) are "folded" back over those limits. In other words, when the waveform hits the limit, its direction is reversed to keep it within the range -1 to 1. A waveform visualizer (such as Scope) is useful to understand what\'s going on.\n\nIf an input waveform has a low amplitude, it may not hit the thresholds for folding, and just have its amplitude increased.\n\nOrinami has a control to set the number of "stages". Increasing numbers of stages cause more stretching and folding, and hence more distortion.'},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),r=function e(t,n,r){a(this,e),this.inputs={},this.outputs={};var o=t.createElement("div");o.innerHTML=i,this.panelView=o.childNodes[0];var s=this.panelView.querySelector("textarea");s.addEventListener("dblclick",function(e){s.readOnly=!s.readOnly,e.preventDefault()},!0),r&&(s.value=r.t,s.readOnly=!0),this.save=function(){return{t:s.value}}};t.default=r,r.blockName="Remark",r.helpText="Remark is a special block that doesn't process audio but merely provides a place to write notes about a patch.\n\nDouble click anywhere in the text area to allow/disallow editing the text."},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26),r=function e(t,n,r){a(this,e);var o="sine",s=440,l=100,u=n.createOscillator();u.type=o,u.frequency.value=s,u.start();var c=n.createGain();c.gain.value=l,c.connect(u.frequency),r&&(u.type=r.w,u.frequency.value=r.f,c.gain.value=r.fm),this.inputs={fm:{type:"audio",node:c}},this.outputs={audio:{type:"audio",node:u}};var d=t.createElement("div");d.innerHTML=i,this.panelView=d.childNodes[0];var p=this.panelView.querySelector(".waveform-select");p.value=u.type,p.addEventListener("input",function(){u.type=p.value});var h=this.panelView.querySelector(".frequency-input");h.value=u.frequency.value,h.addEventListener("input",function(){var e=parseFloat(h.value);e>0&&(u.frequency.value=e)});var f=this.panelView.querySelector(".fm-scale-input");f.value=c.gain.value,f.addEventListener("input",function(){var e=parseFloat(f.value);c.gain.value=e}),this.save=function(){return{w:u.type,f:u.frequency.value,fm:c.gain.value}}};t.default=r,r.blockName="Waverly",r.helpText="Waverly is a oscillator with switchable waveform and linear FM input.\n\nThe available waveforms are sine (SIN), triangle, (TRI), square (SQR), sawtooth (SAW).\n\nThe fm input is scaled by the FM Scale panel setting and then added to the oscillator frequency in hertz. So for example, if an audio signal in the range [-1,1] is connected to the fm input, and the FM Scale is set to 100, the oscillator frequency will be modulated between 100hz up and 100hz down."},function(e,t){e.exports='<div style=box-sizing:border-box;width:190px;height:256px;font-size:14px;background-color:#dae6d9> <div style=padding:10px;background-color:#a9d6a7> <label>Responses<br><span style=font-size:.75em;color:#555>(drag &amp; drop audio file to add)</span><br><select class=response-select style=max-width:170px> </select></label> <div style=margin-top:10px><label>Dry&harr;Wet<br><input class=dry-wet type=range step=any min=0 max=1 style="width:170px;margin:5px 0"></label></div> </div> <div style=padding:10px> <div><label>Name<br><span class=active-response-name style=word-wrap:break-word></span></label></div> <div style=margin-top:10px><label>Duration<br><span class=active-response-duration></span></label></div> <div style=margin-top:10px><button class=active-response-delete>Delete</button></div> </div> </div> '},function(e,t){e.exports='<div style=box-sizing:border-box;width:126px;height:256px;padding:10px;background-color:#ddd> <div style=font-size:14px> <label>Mode<br><select class=mode-select> <option value=AD>/\\</option> <option value=ASR>/‾\\</option> </select></label> <div style=margin-top:10px><label>Rise<br><input class=rise-time-input type=range step=any min=0 max=1 style="width:106px;margin:5px 0"></label></div> <div style=margin-top:10px><label>Fall<br><input class=fall-time-input type=range step=any min=0 max=1 style="width:106px;margin:5px 0"></label></div> <div style=margin-top:10px><label>Fall Shape<br><select class=fall-shape-select> <option value=L>LIN</option> <option value=E>EXP</option> </select></label></div> </div> </div> '},function(e,t){e.exports="<div style=box-sizing:border-box;width:62px;height:256px;padding:10px;background-color:#888> </div> "},function(e,t){e.exports='<div style=height:100%;display:flex;background-color:#0a0a0a> <div style="width:114px;padding:5px 10px;background-color:#333;overflow:scroll"> <div style="margin:10px 0"> <button class=toggle-front-back-button title="Flip Front/Back [space]" style="color:#9aada2;padding:5px;border:1px solid currentColor;border-radius:10px;background-color:transparent;cursor:pointer;margin-right:5px"><svg style=width:40px;height:40px;fill:currentColor xmlns=http://www.w3.org/2000/svg viewBox="0 0 100 100" x=0px y=0px><polygon points="61.07 52.86 37.44 69.46 61.07 86.05 61.07 72.96 81.07 72.96 81.07 65.96 61.07 65.96 61.07 52.86"/><polygon points="37.87 32.6 17.86 32.6 17.86 39.6 37.87 39.6 37.87 52.7 61.49 36.1 37.87 19.5 37.87 32.6"/></svg></button> <button class=delete-wires-button title="Delete Wires [d]" style="color:#9aada2;padding:5px;border:1px solid currentColor;border-radius:10px;background-color:transparent;cursor:pointer"><svg style=width:40px;height:40px;fill:currentColor xmlns=http://www.w3.org/2000/svg viewBox="0 0 100 100" x=0px y=0px><path d=M90.05,31.37l-3.11-6.27-25,12.39L73.12,12.83l-6.37-2.9L52,42.4l-12.3,6.09A14.56,14.56,0,1,0,31,60.58l.15-.07h0l16.24-8L39.6,69.64h0l-.08.17a14.54,14.54,0,1,0,11.83-9.12l6-13.13ZM32.21,50a7.47,7.47,0,0,1-3.3,3.8l-.74.36a7.53,7.53,0,1,1,4-4.17Zm23.6,18.09A7.53,7.53,0,1,1,46,72.42l.37-.81A7.54,7.54,0,0,1,55.81,68.11Z /></svg></button> </div> <div class=block-palette style="font-family:HelveticaNeue-Light,\'Helvetica Neue Light\',\'Helvetica Neue\',sans-serif"></div> </div> <div class=block-help-panel style="flex:.2 0 150px;overflow:scroll;color:#ccc;background:#222;display:none"> <button class=block-help-panel-close-button style="float:right;background:0 0;padding:0;border:none;color:inherit;cursor:pointer"><svg style=width:32px;height:32px;fill:currentColor xmlns=http://www.w3.org/2000/svg fill=#000000 viewBox="10 10 80 80" x=0px y=0px><polygon points="67.04 26.5 49.54 44 32.03 26.5 27.09 31.45 44.59 48.95 27.09 66.45 32.03 71.4 49.54 53.9 67.04 71.4 71.99 66.45 54.49 48.95 71.99 31.45 67.04 26.5"/></svg></button> <div style="padding:0 10px;font-size:14px"> <h2 style="margin:.5em 0"><span class=block-help-title></span></h2> <div class=block-help-body></div> </div> </div> <div class=block-container style=flex:1;flex-wrap:wrap;display:flex;align-content:flex-start;padding:1px;overflow:scroll></div> <div style="flex:0 0 400px;background-color:#444;padding:10px;display:none"> <div style=color:#bbb;font-size:16px;margin-bottom:10px>Patch Management</div> <div><select class=patch-output-select></select> &rarr; <select class=patch-input-select></select> <button class=patch-connect-button>Connect</button></div> <ul class=patch-connection-list style=list-style-type:none;padding:0></ul> </div> </div> ';
},function(e,t){e.exports='<div style=box-sizing:border-box;width:318px;height:256px;padding:0> <textarea style="width:100%;height:100%;background:#000;color:#aaa;font-size:14px;border:1px solid #222;resize:none" spellcheck=false></textarea> </div> '},function(e,t){e.exports="<div style=box-sizing:border-box;width:126px;height:256px;padding:10px;background-color:#dfe3eb> <div style=text-align:center;font-family:monospace;color:#415274>\\/\\/averly</div> <div style=font-size:14px;margin-top:20px> <label>Form<br><select class=waveform-select> <option value=sine>SIN</option> <option value=triangle>TRI</option> <option value=square>SQR</option> <option value=sawtooth>SAW</option> </select></label> <div style=margin-top:10px><label>Frequency<br><input class=frequency-input type=number step=any min=0 style=width:5em;text-align:right>hz</label></div> <div style=margin-top:10px><label>FM Scale<br><input class=fm-scale-input type=number step=any style=width:5em;text-align:right></label></div> </div> </div> "},function(e,t){e.exports="\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000000' x='0px' y='0px' viewBox='0 0 100 100'%3E%3Cpath d='M 35 5 L 35 8 L 35 35 L 35 38 L 41 38 L 41 35 L 41 11 L 81 11 L 81 89 L 41 89 L 41 65 L 41 62 L 35 62 L 35 65 L 35 92 L 35 95 L 38 95 L 84 95 L 87 95 L 87 92 L 87 8 L 87 5 L 84 5 L 38 5 L 35 5 z M 50 29.75 L 45.75 34 L 47.875 36.09375 L 58.75 47 L 10 47 L 7 47 L 7 53 L 10 53 L 58.75 53 L 47.875 63.875 L 45.75 66 L 50 70.21875 L 52.125 68.09375 L 68.125 52.09375 L 70.25 50 L 68.125 47.875 L 52.125 31.875 L 50 29.75 z ' /%3E%3C/svg%3E\""},function(e,t){e.exports="\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000000' x='0px' y='0px' viewBox='0 0 100 100'%3E%3Cpath transform='scale(-1,1) translate(-100 0)' d='M 35 5 L 35 8 L 35 35 L 35 38 L 41 38 L 41 35 L 41 11 L 81 11 L 81 89 L 41 89 L 41 65 L 41 62 L 35 62 L 35 65 L 35 92 L 35 95 L 38 95 L 84 95 L 87 95 L 87 92 L 87 8 L 87 5 L 84 5 L 38 5 L 35 5 z M 26 29.75 L 23.875 31.875 L 7.875 47.875 L 5.75 50 L 7.875 52.09375 L 23.875 68.09375 L 26 70.21875 L 30.25 66 L 28.125 63.875 L 17.25 53 L 66 53 L 69 53 L 69 47 L 66 47 L 17.25 47 L 28.125 36.09375 L 30.25 34 L 26 29.75 z '/%3E%3C/svg%3E\""},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),a=0;a<e.length;a++)n[e.charCodeAt(a)]=a;t.encode=function(t){var n,a=new Uint8Array(t),i=a.length,r="";for(n=0;n<i;n+=3)r+=e[a[n]>>2],r+=e[(3&a[n])<<4|a[n+1]>>4],r+=e[(15&a[n+1])<<2|a[n+2]>>6],r+=e[63&a[n+2]];return i%3===2?r=r.substring(0,r.length-1)+"=":i%3===1&&(r=r.substring(0,r.length-2)+"=="),r},t.decode=function(e){var t,a,i,r,o,s=.75*e.length,l=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<l;t+=4)a=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],r=n[e.charCodeAt(t+2)],o=n[e.charCodeAt(t+3)],d[u++]=a<<2|i>>4,d[u++]=(15&i)<<4|r>>2,d[u++]=(3&r)<<6|63&o;return c}}()},function(e,t,n){"use strict";e.exports=4294967295},function(e,t,n){"use strict";var a=n(40),i={};a(i,"VALUE",2.2250738585072014e-308),a(i,"DENORMALIZED",5e-324),e.exports=i},function(e,t,n){"use strict";function a(e){if(!e)throw new Error("Assertion error")}function i(e,t){if(!(this instanceof i))return new i(e,t);this._audioContext=e,this._targetParam=t;var n=this;Object.defineProperty(this,"mode",{get:function(){return n._mode},set:function(t){n.MODES.indexOf(t)>=0&&(n.gate(!1,r(Math.max(this._lastGateTime,e.currentTime),1/0)),n._mode=t)}}),Object.defineProperty(this,"attackShape",{get:function(){return n._attackShape},set:function(e){n.ATTACK_SHAPES.indexOf(e)>=0&&(n._attackShape=e)}}),Object.defineProperty(this,"attackRate",{get:function(){return n._attackRate},set:function(e){"number"==typeof e&&!isNaN(e)&&e>0&&(n._attackRate=e)}}),Object.defineProperty(this,"attackLevel",{get:function(){return n._attackLevel},set:function(e){"number"!=typeof e||isNaN(e)||(n._attackLevel=e)}}),Object.defineProperty(this,"decayShape",{get:function(){return n._decayShape},set:function(e){n.DECAY_SHAPES.indexOf(e)>=0&&(n._decayShape=e)}}),Object.defineProperty(this,"decayRate",{get:function(){return n._decayRate},set:function(e){"number"==typeof e&&!isNaN(e)&&e>0&&(n._decayRate=e)}}),Object.defineProperty(this,"sustainFraction",{get:function(){return n._sustainFraction},set:function(e){"number"==typeof e&&!isNaN(e)&&e>=0&&e<=1&&(n._sustainFraction=e)}}),Object.defineProperty(this,"releaseShape",{get:function(){return n._releaseShape},set:function(e){n.RELEASE_SHAPES.indexOf(e)>=0&&(n._releaseShape=e)}}),Object.defineProperty(this,"releaseRate",{get:function(){return n._releaseRate},set:function(e){"number"==typeof e&&!isNaN(e)&&e>0&&(n._releaseRate=e)}}),this._mode="ADSR",this._attackShape=this.LINEAR,this._attackRate=2,this._attackLevel=1,this._decayShape=this.EXPONENTIAL,this._decayRate=1,this._sustainFraction=.5,this._releaseShape=this.EXPONENTIAL,this._releaseRate=1,this._targetParam.value=o,this._scheduledSegments=[],this._lastGateTime=e.currentTime,this._lastGateState=!1}var r=n(37),o=0;i.prototype.MODES=["AD","ASR","ADSR"],i.prototype.LINEAR="L",i.prototype.EXPONENTIAL="E",i.prototype.ATTACK_SHAPES=[i.prototype.LINEAR],i.prototype.DECAY_SHAPES=[i.prototype.LINEAR,i.prototype.EXPONENTIAL],i.prototype.RELEASE_SHAPES=[i.prototype.LINEAR,i.prototype.EXPONENTIAL],i.prototype._interruptScheduledSegments=function(e){var t;if(this._scheduledSegments.length){a(e>=this._scheduledSegments[0].beginTime);for(var n,i=0;i<this._scheduledSegments.length;i++){var o=this._scheduledSegments[i];if(e>=o.beginTime&&e<o.endTime){n=i;break}}if(void 0===n){var s=this._scheduledSegments[this._scheduledSegments.length-1];a(e>=s.endTime),t=s.endValue,this._targetParam.setValueAtTime(t,e)}else{var l=this._scheduledSegments[n];l.shape===this.LINEAR?(a(l.endTime!==1/0),t=l.beginValue+(e-l.beginTime)/(l.endTime-l.beginTime)*(l.endValue-l.beginValue),this._targetParam.linearRampToValueAtTime(t,e)):l.shape===this.EXPONENTIAL?(t=l.endValue+(l.beginValue-l.endValue)*Math.exp(l.rate*(l.beginTime-e)),this._targetParam.setValueAtTime(t,e)):a(!1)}}else t=0,this._targetParam.setValueAtTime(t,e);a(void 0!==t),this._targetParam.cancelScheduledValues(r(e,1/0)),this._scheduledSegments=[{beginTime:e,endTime:e,beginValue:t,endValue:t,shape:this.LINEAR}]},i.prototype._scheduleSegment=function(e,t,n){a(this._scheduledSegments.length>0);var i=this._scheduledSegments[this._scheduledSegments.length-1];if(a(i.endTime!==1/0),i.endValue!==e){var r;if(n===1/0)r=i.endTime,this._targetParam.setValueAtTime(e,r);else switch(t){case this.LINEAR:r=i.endTime+Math.abs((e-i.endValue)/n),this._targetParam.linearRampToValueAtTime(e,r);break;case this.EXPONENTIAL:r=1/0,this._targetParam.setTargetAtTime(e,i.endTime,1/n);break;default:a(!1)}this._scheduledSegments.push({shape:t,beginTime:i.endTime,endTime:r,beginValue:i.endValue,endValue:e,rate:n})}},i.prototype.gate=function(e,t){var n=this._audioContext.currentTime;if(t=void 0===t?n:t,t<this._lastGateTime)return void console.warn("Received gate with time earlier than a previous gate");if(this._lastGateTime=t,this._lastGateState=e,"AD"!==this._mode||e)if(this._interruptScheduledSegments(t),e){if(this._scheduleSegment(this._attackLevel,this._attackShape,this._attackRate),"AD"===this._mode||"ADSR"===this._mode){var a;a="AD"===this._mode?o:this._sustainFraction*this._attackLevel,this._scheduleSegment(a,this._decayShape,this._decayRate)}}else this._scheduleSegment(o,this._releaseShape,this._releaseRate)},i.prototype.gateOn=function(e){this.gate(!0,e)},i.prototype.gateOff=function(e){this.gate(!1,e)},e.exports=i},function(e,t,n){"use strict";function a(e,t){return o[s]=e,o[l]=t,r[0]}var i=n(36),r=new Float64Array(1),o=new Uint32Array(r.buffer),s=i.HIGH,l=i.LOW;e.exports=a},function(e,t,n){"use strict";var a,i,r=n(9);r===!0?(a=1,i=0):(a=0,i=1),e.exports={HIGH:a,LOW:i}},function(e,t,n){"use strict";function a(e,t){var n,a,c,d;return e!==e||t!==t?NaN:e===t?t:0===e?(e=t<0?-o:o,t=e*e,e):(n=i(e),a=n[0],c=n[1],t>e==e>0?c===s?(a+=1,c=0):c+=1:0===c?(a-=1,c=s):c-=1,d=a&l,d===l?e+e:(d<u&&(t=e*e),r(a,c)))}var i=n(38),r=n(35),o=n(33).DENORMALIZED,s=n(32),l=2146435072,u=1048576;e.exports=a},function(e,t,n){"use strict";function a(e){return r[0]=e,[o[s],o[l]]}var i=n(39),r=new Float64Array(1),o=new Uint32Array(r.buffer),s=i.HIGH,l=i.LOW;e.exports=a},function(e,t,n){"use strict";var a,i,r=n(9);r?(a=1,i=0):(a=0,i=1),e.exports={HIGH:a,LOW:i}},function(e,t,n){"use strict";function a(e,t,n){Object.defineProperty(e,t,{value:n,configurable:!1,writable:!1,enumerable:!0})}e.exports=a},function(e,t,n){"use strict";var a={uint16:Uint16Array,uint8:Uint8Array};e.exports=a},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){k&&(k.outputs.audio.node.disconnect(w.destination),k.deactivate&&k.deactivate(),document.querySelector("#root-container").innerHTML=""),x=e,k=new b[e](document,w,t),document.querySelector("#root-container").appendChild(k.windowView),k.outputs.audio.node.connect(w.destination)}function r(){var e={bm:{ro:{b:"__ro",s:{p:{audio:{t:"audio"}}},n:"Rack Outputs"},b1:{b:"remark",s:{t:"WELCOME TO PLINTH!\n\nSome tips to get you started:\n- Drag blocks from the block palette on the left into the rack area on the right.\n- Press the Flip button (or space bar) to show the back view of the rack, where you can click or drag to wire connections between block ports.\n- To remove wires, toggle Delete Wires mode and click on them.\n- Click on any block in the palette for help.\n- To hear something, connect an audio generating block (such as Waverly) to the Rack Outputs block audio port.\n- Unwanted blocks can be deleted with the small X button in the back view. Once you've read this, feel free to delete this block.\n\nHappy patching!"},n:"Remark"}},bo:["b1","ro"],c:[]};i("racket",e)}function o(){k?E.style.visibility="visible":E.style.visibility="hidden",L.style.transition="visibility 0s,opacity "+T+"s linear",L.style.visibility="visible",L.style.opacity="1",L.style.pointerEvents="auto"}function s(){L.style.transition="visibility 0s linear "+T+"s,opacity "+T+"s linear",L.style.visibility="hidden",L.style.opacity="0",L.style.pointerEvents="none"}var l=n(12),u=a(l),c=n(13),d=a(c),p=n(1),h=a(p),f=n(0),v=a(f),g=n(10),m=a(g);n(11),(0,h.default)();var y={};["bigben","convolux","egen","gainer","orinami","remark","scope","thumper","waverly"].forEach(function(e){y[e]=n(14)("./"+e+"/block.js").default});var b=Object.assign({},y);b.racket=(0,m.default)(y);var w=(0,v.default)(window),x=void 0,k=void 0,L=document.querySelector("#load-screen"),E=document.querySelector("#load-screen-close-button"),T=.15;E.addEventListener("click",function(e){e.preventDefault(),s()}),document.querySelector("#new-patch-button").addEventListener("click",function(e){e.preventDefault(),o()}),document.querySelector("#load-empty-rack-button").addEventListener("click",function(e){e.preventDefault(),r(),s()});var I=document.querySelector("#load-preset-file-chooser");I.addEventListener("change",function(e){e.preventDefault();var t=I.files;if(!(t.length<1)){I.files=null;var n=t[0],a=new FileReader;a.onload=function(e){var t=e.target.result,n=JSON.parse(t);n.plinthPresetVersion||console.log("not a preset"),i(n.b,n.s),s()},a.readAsText(n,"utf-8")}}),document.querySelector("#save-preset-button").addEventListener("click",function(e){e.preventDefault();var t=null;k.save?t=k.save():console.log("Loaded block doesn't support saving settings");var n={plinthPresetVersion:0,b:x,s:t},a=JSON.stringify(n),i=d.default.compressToEncodedURIComponent(a);console.log("encoded URI length:",i.length),u.default.saveAs(new Blob([a],{type:"application/json;charset=utf-8"}),"preset.json")})}]);